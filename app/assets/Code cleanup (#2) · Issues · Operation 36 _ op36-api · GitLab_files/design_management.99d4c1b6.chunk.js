(this.webpackJsonp=this.webpackJsonp||[]).push([[270],{"+zu5":function(e,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"activeDiscussion"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"activeDiscussion"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"client"},arguments:[]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"source"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:78}};i.loc.source={body:"query activeDiscussion {\n  activeDiscussion @client {\n    id\n    source\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function a(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}i.definitions.forEach((function(e){if(e.name){var n=new Set;!function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach((function(n){e(n,i)})),n.variableDefinitions&&n.variableDefinitions.forEach((function(n){e(n,i)})),n.definitions&&n.definitions.forEach((function(n){e(n,i)}))}(e,n),t[e.name.value]=n}})),e.exports=i,e.exports.activeDiscussion=function(e,n){var i={kind:e.kind,definitions:[a(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var s=t[n]||new Set,o=new Set,r=new Set;for(s.forEach((function(e){r.add(e)}));r.size>0;){var d=r;r=new Set,d.forEach((function(e){o.has(e)||(o.add(e),(t[e]||new Set).forEach((function(e){r.add(e)})))}))}return o.forEach((function(n){var t=a(e,n);t&&i.definitions.push(t)})),i}(i,"activeDiscussion")},"07mE":function(e,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"DesignTodoItem"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Design"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"currentUserTodos"},arguments:[{kind:"Argument",name:{kind:"Name",value:"state"},value:{kind:"EnumValue",value:"pending"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:149}};i.loc.source={body:"fragment DesignTodoItem on Design {\n  id\n  image\n  __typename\n  currentUserTodos(state: pending) {\n    nodes {\n      id\n      __typename\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function a(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}i.definitions.forEach((function(e){if(e.name){var n=new Set;!function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach((function(n){e(n,i)})),n.variableDefinitions&&n.variableDefinitions.forEach((function(n){e(n,i)})),n.definitions&&n.definitions.forEach((function(n){e(n,i)}))}(e,n),t[e.name.value]=n}})),e.exports=i,e.exports.DesignTodoItem=function(e,n){var i={kind:e.kind,definitions:[a(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var s=t[n]||new Set,o=new Set,r=new Set;for(s.forEach((function(e){r.add(e)}));r.size>0;){var d=r;r=new Set,d.forEach((function(e){o.has(e)||(o.add(e),(t[e]||new Set).forEach((function(e){r.add(e)})))}))}return o.forEach((function(n){var t=a(e,n);t&&i.definitions.push(t)})),i}(i,"DesignTodoItem")},"0jMo":function(e,n,i){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"updateNote"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdateNoteInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateNote"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"note"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"DesignNote"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"errors"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:185}};t.loc.source={body:'#import "../fragments/design_note.fragment.graphql"\n\nmutation updateNote($input: UpdateNoteInput!) {\n  updateNote(input: $input) {\n    note {\n      ...DesignNote\n    }\n    errors\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};t.definitions=t.definitions.concat(i("qhCH").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!a[n]&&(a[n]=!0,!0)})));var s={};function o(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}t.definitions.forEach((function(e){if(e.name){var n=new Set;!function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach((function(n){e(n,i)})),n.variableDefinitions&&n.variableDefinitions.forEach((function(n){e(n,i)})),n.definitions&&n.definitions.forEach((function(n){e(n,i)}))}(e,n),s[e.name.value]=n}})),e.exports=t,e.exports.updateNote=function(e,n){var i={kind:e.kind,definitions:[o(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var t=s[n]||new Set,a=new Set,r=new Set;for(t.forEach((function(e){r.add(e)}));r.size>0;){var d=r;r=new Set,d.forEach((function(e){a.has(e)||(a.add(e),(s[e]||new Set).forEach((function(e){r.add(e)})))}))}return a.forEach((function(n){var t=o(e,n);t&&i.definitions.push(t)})),i}(t,"updateNote")},"6TQR":function(e,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getDesignList"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"fullPath"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"iid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"atVersion"}},type:{kind:"NamedType",name:{kind:"Name",value:"DesignManagementVersionID"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"project"},arguments:[{kind:"Argument",name:{kind:"Name",value:"fullPath"},value:{kind:"Variable",name:{kind:"Name",value:"fullPath"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"issue"},arguments:[{kind:"Argument",name:{kind:"Name",value:"iid"},value:{kind:"Variable",name:{kind:"Name",value:"iid"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"designCollection"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"copyState"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"designs"},arguments:[{kind:"Argument",name:{kind:"Name",value:"atVersion"},value:{kind:"Variable",name:{kind:"Name",value:"atVersion"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"event"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"filename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"notesCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"imageV432x230"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"currentUserTodos"},arguments:[{kind:"Argument",name:{kind:"Name",value:"state"},value:{kind:"EnumValue",value:"pending"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"versions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sha"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}]}}],loc:{start:0,end:970}};i.loc.source={body:"query getDesignList($fullPath: ID!, $iid: String!, $atVersion: DesignManagementVersionID) {\n  project(fullPath: $fullPath) {\n    __typename\n    id\n    issue(iid: $iid) {\n      __typename\n      id\n      designCollection {\n        __typename\n        copyState\n        designs(atVersion: $atVersion) {\n          __typename\n          nodes {\n            __typename\n            id\n            event\n            filename\n            notesCount\n            image\n            imageV432x230\n            currentUserTodos(state: pending) {\n              __typename\n              nodes {\n                __typename\n                id\n              }\n            }\n          }\n        }\n        versions {\n          __typename\n          nodes {\n            __typename\n            id\n            sha\n            createdAt\n            author {\n              __typename\n              id\n              name\n              avatarUrl\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function a(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}i.definitions.forEach((function(e){if(e.name){var n=new Set;!function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach((function(n){e(n,i)})),n.variableDefinitions&&n.variableDefinitions.forEach((function(n){e(n,i)})),n.definitions&&n.definitions.forEach((function(n){e(n,i)}))}(e,n),t[e.name.value]=n}})),e.exports=i,e.exports.getDesignList=function(e,n){var i={kind:e.kind,definitions:[a(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var s=t[n]||new Set,o=new Set,r=new Set;for(s.forEach((function(e){r.add(e)}));r.size>0;){var d=r;r=new Set,d.forEach((function(e){o.has(e)||(o.add(e),(t[e]||new Set).forEach((function(e){r.add(e)})))}))}return o.forEach((function(n){var t=a(e,n);t&&i.definitions.push(t)})),i}(i,"getDesignList")},Bki7:function(e,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"DesignListItem"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Design"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"event"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"filename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"notesCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"imageV432x230"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"currentUserTodos"},arguments:[{kind:"Argument",name:{kind:"Name",value:"state"},value:{kind:"EnumValue",value:"pending"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:167}};i.loc.source={body:"fragment DesignListItem on Design {\n  id\n  event\n  filename\n  notesCount\n  image\n  imageV432x230\n  currentUserTodos(state: pending) {\n    nodes {\n      id\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function a(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}i.definitions.forEach((function(e){if(e.name){var n=new Set;!function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach((function(n){e(n,i)})),n.variableDefinitions&&n.variableDefinitions.forEach((function(n){e(n,i)})),n.definitions&&n.definitions.forEach((function(n){e(n,i)}))}(e,n),t[e.name.value]=n}})),e.exports=i,e.exports.DesignListItem=function(e,n){var i={kind:e.kind,definitions:[a(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var s=t[n]||new Set,o=new Set,r=new Set;for(s.forEach((function(e){r.add(e)}));r.size>0;){var d=r;r=new Set,d.forEach((function(e){o.has(e)||(o.add(e),(t[e]||new Set).forEach((function(e){r.add(e)})))}))}return o.forEach((function(n){var t=a(e,n);t&&i.definitions.push(t)})),i}(i,"DesignListItem")},F5Vr:function(e,n,i){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"destroyDesign"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"filenames"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"projectPath"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"iid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"designManagementDelete"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"projectPath"},value:{kind:"Variable",name:{kind:"Name",value:"projectPath"}}},{kind:"ObjectField",name:{kind:"Name",value:"iid"},value:{kind:"Variable",name:{kind:"Name",value:"iid"}}},{kind:"ObjectField",name:{kind:"Name",value:"filenames"},value:{kind:"Variable",name:{kind:"Name",value:"filenames"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"version"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"VersionListItem"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"errors"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:289}};t.loc.source={body:'#import "../fragments/version.fragment.graphql"\n\nmutation destroyDesign($filenames: [String!]!, $projectPath: ID!, $iid: ID!) {\n  designManagementDelete(input: { projectPath: $projectPath, iid: $iid, filenames: $filenames }) {\n    version {\n      ...VersionListItem\n    }\n    errors\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};t.definitions=t.definitions.concat(i("Qg5k").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!a[n]&&(a[n]=!0,!0)})));var s={};function o(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}t.definitions.forEach((function(e){if(e.name){var n=new Set;!function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach((function(n){e(n,i)})),n.variableDefinitions&&n.variableDefinitions.forEach((function(n){e(n,i)})),n.definitions&&n.definitions.forEach((function(n){e(n,i)}))}(e,n),s[e.name.value]=n}})),e.exports=t,e.exports.destroyDesign=function(e,n){var i={kind:e.kind,definitions:[o(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var t=s[n]||new Set,a=new Set,r=new Set;for(t.forEach((function(e){r.add(e)}));r.size>0;){var d=r;r=new Set,d.forEach((function(e){a.has(e)||(a.add(e),(s[e]||new Set).forEach((function(e){r.add(e)})))}))}return a.forEach((function(n){var t=o(e,n);t&&i.definitions.push(t)})),i}(t,"destroyDesign")},Fz6Z:function(e,n,i){var t={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"DesignItem"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Design"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"DesignListItem"},directives:[]},{kind:"Field",name:{kind:"Name",value:"fullPath"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"diffRefs"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"DesignDiffRefs"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"discussions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"replyId"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"ResolvedStatus"},directives:[]},{kind:"Field",name:{kind:"Name",value:"notes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"DesignNote"},directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:439}};t.loc.source={body:'#import "./design_note.fragment.graphql"\n#import "./design_list.fragment.graphql"\n#import "./diff_refs.fragment.graphql"\n#import "./discussion_resolved_status.fragment.graphql"\n\nfragment DesignItem on Design {\n  ...DesignListItem\n  fullPath\n  diffRefs {\n    ...DesignDiffRefs\n  }\n  discussions {\n    nodes {\n      id\n      replyId\n      ...ResolvedStatus\n      notes {\n        nodes {\n          ...DesignNote\n        }\n      }\n    }\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function s(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!a[n]&&(a[n]=!0,!0)}))}t.definitions=t.definitions.concat(s(i("qhCH").definitions)),t.definitions=t.definitions.concat(s(i("Bki7").definitions)),t.definitions=t.definitions.concat(s(i("svfI").definitions)),t.definitions=t.definitions.concat(s(i("QN88").definitions));var o={};function r(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}t.definitions.forEach((function(e){if(e.name){var n=new Set;!function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach((function(n){e(n,i)})),n.variableDefinitions&&n.variableDefinitions.forEach((function(n){e(n,i)})),n.definitions&&n.definitions.forEach((function(n){e(n,i)}))}(e,n),o[e.name.value]=n}})),e.exports=t,e.exports.DesignItem=function(e,n){var i={kind:e.kind,definitions:[r(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var t=o[n]||new Set,a=new Set,s=new Set;for(t.forEach((function(e){s.add(e)}));s.size>0;){var d=s;s=new Set,d.forEach((function(e){a.has(e)||(a.add(e),(o[e]||new Set).forEach((function(e){s.add(e)})))}))}return a.forEach((function(n){var t=r(e,n);t&&i.definitions.push(t)})),i}(t,"DesignItem")},GSdU:function(e,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"updateActiveDiscussion"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"source"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateActiveDiscussion"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"source"},value:{kind:"Variable",name:{kind:"Name",value:"source"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"client"},arguments:[]}]}]}}],loc:{start:0,end:125}};i.loc.source={body:"mutation updateActiveDiscussion($id: String, $source: String) {\n  updateActiveDiscussion(id: $id, source: $source) @client\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function a(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}i.definitions.forEach((function(e){if(e.name){var n=new Set;!function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach((function(n){e(n,i)})),n.variableDefinitions&&n.variableDefinitions.forEach((function(n){e(n,i)})),n.definitions&&n.definitions.forEach((function(n){e(n,i)}))}(e,n),t[e.name.value]=n}})),e.exports=i,e.exports.updateActiveDiscussion=function(e,n){var i={kind:e.kind,definitions:[a(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var s=t[n]||new Set,o=new Set,r=new Set;for(s.forEach((function(e){r.add(e)}));r.size>0;){var d=r;r=new Set,d.forEach((function(e){o.has(e)||(o.add(e),(t[e]||new Set).forEach((function(e){r.add(e)})))}))}return o.forEach((function(n){var t=a(e,n);t&&i.definitions.push(t)})),i}(i,"updateActiveDiscussion")},HSIc:function(e,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"DesignNotePermissions"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NotePermissions"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"adminNote"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"repositionNote"},arguments:[],directives:[]}]}}],loc:{start:0,end:83}};i.loc.source={body:"fragment DesignNotePermissions on NotePermissions {\n  adminNote\n  repositionNote\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function a(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}i.definitions.forEach((function(e){if(e.name){var n=new Set;!function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach((function(n){e(n,i)})),n.variableDefinitions&&n.variableDefinitions.forEach((function(n){e(n,i)})),n.definitions&&n.definitions.forEach((function(n){e(n,i)}))}(e,n),t[e.name.value]=n}})),e.exports=i,e.exports.DesignNotePermissions=function(e,n){var i={kind:e.kind,definitions:[a(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var s=t[n]||new Set,o=new Set,r=new Set;for(s.forEach((function(e){r.add(e)}));r.size>0;){var d=r;r=new Set,d.forEach((function(e){o.has(e)||(o.add(e),(t[e]||new Set).forEach((function(e){r.add(e)})))}))}return o.forEach((function(n){var t=a(e,n);t&&i.definitions.push(t)})),i}(i,"DesignNotePermissions")},LT1q:function(e,n,i){"use strict";i.d(n,"k",(function(){return t})),i.d(n,"l",(function(){return a})),i.d(n,"z",(function(){return s})),i.d(n,"y",(function(){return o})),i.d(n,"x",(function(){return r})),i.d(n,"A",(function(){return d})),i.d(n,"B",(function(){return l})),i.d(n,"K",(function(){return u})),i.d(n,"L",(function(){return c})),i.d(n,"N",(function(){return m})),i.d(n,"M",(function(){return g})),i.d(n,"D",(function(){return f})),i.d(n,"C",(function(){return v})),i.d(n,"H",(function(){return p})),i.d(n,"G",(function(){return h})),i.d(n,"F",(function(){return k})),i.d(n,"E",(function(){return y})),i.d(n,"J",(function(){return D})),i.d(n,"I",(function(){return b})),i.d(n,"T",(function(){return S})),i.d(n,"S",(function(){return N})),i.d(n,"P",(function(){return _})),i.d(n,"R",(function(){return w})),i.d(n,"O",(function(){return E})),i.d(n,"U",(function(){return F})),i.d(n,"Q",(function(){return C})),i.d(n,"g",(function(){return I})),i.d(n,"f",(function(){return P})),i.d(n,"e",(function(){return x})),i.d(n,"h",(function(){return T})),i.d(n,"d",(function(){return V})),i.d(n,"j",(function(){return O})),i.d(n,"i",(function(){return j})),i.d(n,"o",(function(){return $})),i.d(n,"n",(function(){return M})),i.d(n,"p",(function(){return q})),i.d(n,"r",(function(){return A})),i.d(n,"q",(function(){return L})),i.d(n,"m",(function(){return R})),i.d(n,"u",(function(){return U})),i.d(n,"v",(function(){return B})),i.d(n,"t",(function(){return z})),i.d(n,"s",(function(){return G})),i.d(n,"w",(function(){return Q})),i.d(n,"b",(function(){return W})),i.d(n,"c",(function(){return H})),i.d(n,"a",(function(){return Y}));const t="mark",a="measure",s="snippet-view-app-start",o="snippet-edit-app-start",r="snippet-blobs-content-finished",d="snippet-blobs-content",l="webide-app-start",u="webide-file-clicked",c="webide-file-finished",m="webide-init-editor-start",g="webide-init-editor-finish",f="webide-getBranchData-start",v="webide-getBranchData-finish",p="webide-getFileData-start",h="webide-getFileData-finish",k="webide-getFiles-start",y="webide-getFiles-finish",D="webide-getProjectData-start",b="webide-getProjectData-finish",S="webide-file-loading-after-interaction",N="WebIDE: Project data",_="WebIDE: Branch data",w="WebIDE: File data",E="WebIDE: Before Vue app",F="WebIDE: Repo Editor",C="WebIDE: Fetch Files",I="mr-diffs-mark-file-tree-start",P="mr-diffs-mark-file-tree-end",x="mr-diffs-mark-diff-files-start",T="mr-diffs-mark-first-diff-file-shown",V="mr-diffs-mark-diff-files-end",O="mr-diffs-measure-file-tree-done",j="mr-diffs-measure-diff-files-done",$="pipelines-detail-links-mark-calculate-start",M="pipelines-detail-links-mark-calculate-end",q="Pipelines Detail Graph: Links Calculation",A="pipeline_graph_link_calculation_duration_seconds",L="pipeline_graph_links_total",R="pipeline_graph_links_per_job_ratio",U="blobviewer-load-viewer-start",B="blobviewer-switch-to-viewerr-start",z="blobviewer-load-viewer-finish",G="Repository File Viewer: loading the viewer",Q="Repository File Viewer: switching the viewer",W="design-app-start",H="Design Management: Before the Vue app",Y="Design Management: Single image preview"},MLrR:function(e,n,i){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"createNote"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CreateNoteInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createNote"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"note"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"DesignNote"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"errors"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:185}};t.loc.source={body:'#import "../fragments/design_note.fragment.graphql"\n\nmutation createNote($input: CreateNoteInput!) {\n  createNote(input: $input) {\n    note {\n      ...DesignNote\n    }\n    errors\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};t.definitions=t.definitions.concat(i("qhCH").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!a[n]&&(a[n]=!0,!0)})));var s={};function o(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}t.definitions.forEach((function(e){if(e.name){var n=new Set;!function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach((function(n){e(n,i)})),n.variableDefinitions&&n.variableDefinitions.forEach((function(n){e(n,i)})),n.definitions&&n.definitions.forEach((function(n){e(n,i)}))}(e,n),s[e.name.value]=n}})),e.exports=t,e.exports.createNote=function(e,n){var i={kind:e.kind,definitions:[o(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var t=s[n]||new Set,a=new Set,r=new Set;for(t.forEach((function(e){r.add(e)}));r.size>0;){var d=r;r=new Set,d.forEach((function(e){a.has(e)||(a.add(e),(s[e]||new Set).forEach((function(e){r.add(e)})))}))}return a.forEach((function(n){var t=o(e,n);t&&i.definitions.push(t)})),i}(t,"createNote")},OUnR:function(e,n,i){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"toggleResolveDiscussion"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"DiscussionID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"resolve"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"discussionToggleResolve"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"ObjectField",name:{kind:"Name",value:"resolve"},value:{kind:"Variable",name:{kind:"Name",value:"resolve"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"discussion"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"ResolvedStatus"},directives:[]},{kind:"Field",name:{kind:"Name",value:"noteable"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Design"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"DesignTodoItem"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"notes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"DesignNote"},directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"errors"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:551}};t.loc.source={body:'#import "../fragments/design_note.fragment.graphql"\n#import "../fragments/discussion_resolved_status.fragment.graphql"\n#import "../fragments/design_todo_item.fragment.graphql"\n\nmutation toggleResolveDiscussion($id: DiscussionID!, $resolve: Boolean!) {\n  discussionToggleResolve(input: { id: $id, resolve: $resolve }) {\n    discussion {\n      id\n      ...ResolvedStatus\n      noteable {\n        ... on Design {\n          ...DesignTodoItem\n        }\n      }\n      notes {\n        nodes {\n          ...DesignNote\n        }\n      }\n    }\n    errors\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function s(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!a[n]&&(a[n]=!0,!0)}))}t.definitions=t.definitions.concat(s(i("qhCH").definitions)),t.definitions=t.definitions.concat(s(i("QN88").definitions)),t.definitions=t.definitions.concat(s(i("07mE").definitions));var o={};function r(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}t.definitions.forEach((function(e){if(e.name){var n=new Set;!function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach((function(n){e(n,i)})),n.variableDefinitions&&n.variableDefinitions.forEach((function(n){e(n,i)})),n.definitions&&n.definitions.forEach((function(n){e(n,i)}))}(e,n),o[e.name.value]=n}})),e.exports=t,e.exports.toggleResolveDiscussion=function(e,n){var i={kind:e.kind,definitions:[r(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var t=o[n]||new Set,a=new Set,s=new Set;for(t.forEach((function(e){s.add(e)}));s.size>0;){var d=s;s=new Set,d.forEach((function(e){a.has(e)||(a.add(e),(o[e]||new Set).forEach((function(e){s.add(e)})))}))}return a.forEach((function(n){var t=r(e,n);t&&i.definitions.push(t)})),i}(t,"toggleResolveDiscussion")},QN88:function(e,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ResolvedStatus"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Discussion"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resolvable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resolved"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resolvedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resolvedBy"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"webUrl"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:130}};i.loc.source={body:"fragment ResolvedStatus on Discussion {\n  id\n  resolvable\n  resolved\n  resolvedAt\n  resolvedBy {\n    id\n    name\n    webUrl\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function a(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}i.definitions.forEach((function(e){if(e.name){var n=new Set;!function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach((function(n){e(n,i)})),n.variableDefinitions&&n.variableDefinitions.forEach((function(n){e(n,i)})),n.definitions&&n.definitions.forEach((function(n){e(n,i)}))}(e,n),t[e.name.value]=n}})),e.exports=i,e.exports.ResolvedStatus=function(e,n){var i={kind:e.kind,definitions:[a(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var s=t[n]||new Set,o=new Set,r=new Set;for(s.forEach((function(e){r.add(e)}));r.size>0;){var d=r;r=new Set,d.forEach((function(e){o.has(e)||(o.add(e),(t[e]||new Set).forEach((function(e){r.add(e)})))}))}return o.forEach((function(n){var t=a(e,n);t&&i.definitions.push(t)})),i}(i,"ResolvedStatus")},Qg5k:function(e,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"VersionListItem"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"DesignVersion"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sha"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:129}};i.loc.source={body:"fragment VersionListItem on DesignVersion {\n  id\n  sha\n  createdAt\n  author {\n    __typename\n    id\n    name\n    avatarUrl\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function a(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}i.definitions.forEach((function(e){if(e.name){var n=new Set;!function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach((function(n){e(n,i)})),n.variableDefinitions&&n.variableDefinitions.forEach((function(n){e(n,i)})),n.definitions&&n.definitions.forEach((function(n){e(n,i)}))}(e,n),t[e.name.value]=n}})),e.exports=i,e.exports.VersionListItem=function(e,n){var i={kind:e.kind,definitions:[a(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var s=t[n]||new Set,o=new Set,r=new Set;for(s.forEach((function(e){r.add(e)}));r.size>0;){var d=r;r=new Set,d.forEach((function(e){o.has(e)||(o.add(e),(t[e]||new Set).forEach((function(e){r.add(e)})))}))}return o.forEach((function(n){var t=a(e,n);t&&i.definitions.push(t)})),i}(i,"VersionListItem")},TJFe:function(e,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"todoMarkDone"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"TodoID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"todoMarkDone"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"errors"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"todo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:118}};i.loc.source={body:"mutation todoMarkDone($id: TodoID!) {\n  todoMarkDone(input: { id: $id }) {\n    errors\n    todo {\n      id\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function a(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}i.definitions.forEach((function(e){if(e.name){var n=new Set;!function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach((function(n){e(n,i)})),n.variableDefinitions&&n.variableDefinitions.forEach((function(n){e(n,i)})),n.definitions&&n.definitions.forEach((function(n){e(n,i)}))}(e,n),t[e.name.value]=n}})),e.exports=i,e.exports.todoMarkDone=function(e,n){var i={kind:e.kind,definitions:[a(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var s=t[n]||new Set,o=new Set,r=new Set;for(s.forEach((function(e){r.add(e)}));r.size>0;){var d=r;r=new Set,d.forEach((function(e){o.has(e)||(o.add(e),(t[e]||new Set).forEach((function(e){r.add(e)})))}))}return o.forEach((function(n){var t=a(e,n);t&&i.definitions.push(t)})),i}(i,"todoMarkDone")},TSga:function(e,n,i){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"createImageDiffNote"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CreateImageDiffNoteInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createImageDiffNote"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"note"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"DesignNote"},directives:[]},{kind:"Field",name:{kind:"Name",value:"discussion"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"replyId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"noteable"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Design"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"DesignTodoItem"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"notes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"DesignNote"},directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"errors"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:502}};t.loc.source={body:'#import "../fragments/design_note.fragment.graphql"\n#import "../fragments/design_todo_item.fragment.graphql"\n\nmutation createImageDiffNote($input: CreateImageDiffNoteInput!) {\n  createImageDiffNote(input: $input) {\n    note {\n      ...DesignNote\n      discussion {\n        id\n        replyId\n        noteable {\n          ... on Design {\n            ...DesignTodoItem\n          }\n        }\n        notes {\n          nodes {\n            ...DesignNote\n          }\n        }\n      }\n    }\n    errors\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function s(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!a[n]&&(a[n]=!0,!0)}))}t.definitions=t.definitions.concat(s(i("qhCH").definitions)),t.definitions=t.definitions.concat(s(i("07mE").definitions));var o={};function r(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}t.definitions.forEach((function(e){if(e.name){var n=new Set;!function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach((function(n){e(n,i)})),n.variableDefinitions&&n.variableDefinitions.forEach((function(n){e(n,i)})),n.definitions&&n.definitions.forEach((function(n){e(n,i)}))}(e,n),o[e.name.value]=n}})),e.exports=t,e.exports.createImageDiffNote=function(e,n){var i={kind:e.kind,definitions:[r(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var t=o[n]||new Set,a=new Set,s=new Set;for(t.forEach((function(e){s.add(e)}));s.size>0;){var d=s;s=new Set,d.forEach((function(e){a.has(e)||(a.add(e),(o[e]||new Set).forEach((function(e){s.add(e)})))}))}return a.forEach((function(n){var t=r(e,n);t&&i.definitions.push(t)})),i}(t,"createImageDiffNote")},UJk7:function(e,n,i){"use strict";i.r(n);var t=i("q+nE"),a=i("LT1q"),s=i("w+qJ"),o=i("bPvS"),r=Object(o.a)({},(function(){var e=this.$createElement;return(this._self._c||e)("router-view")}),[],!1,null,null,null).exports,d=i("RlQ7"),l=i.n(d),u=i("P9JE"),c=i("ENs1"),m=i("EfTh"),g=i("voi4"),f=i("mphk"),v=i("+zu5"),p=i.n(v),h=i("dhrW"),k=i.n(h),y=i("rCa0"),D=i.n(y),b=i("mzOJ"),S=i.n(b),N=i("teVv");const _={mimetype:"image/*",regex:/image\/.+/},w="pin",E="discussion",F="url",C=["design-detail-layout","overflow-hidden","m-0"],I=function(e){let{type:n}=e;return(n.match(_.regex)||[]).length>0},P=function(e){return e.nodes.map((function(e,n){return{...e,index:n+1,notes:e.notes.nodes}}))},x=function(e){return(e.match("::Version/(.+$)")||[])[1]},T=function(e){return(e.match("Design/(.+$)")||[])[1]},V=function(e){return e.project.issue.designCollection.designs.nodes},O=function(e){return(V(e)||[])[0]},j=function(e){const[,n]=e.match("#note_([0-9]+$)")||[];return n||null},$=function(e){return{__typename:"Mutation",designManagementUpload:{__typename:"DesignManagementUploadPayload",designs:e.map((function(e){return{__typename:"Design",id:-l()(),image:"",imageV432x230:"",filename:e.name,fullPath:"",notesCount:0,event:"NONE",currentUserTodos:{__typename:"TodoConnection",nodes:[]},diffRefs:{__typename:"DiffRefs",baseSha:"",startSha:"",headSha:""},discussions:{__typename:"DesignDiscussion",nodes:[]},versions:{__typename:"DesignVersionConnection",nodes:{__typename:"DesignVersion",id:-l()(),sha:-l()(),createdAt:"",author:{__typename:"UserCore",id:-l()(),name:"",avatarUrl:""}}}}})),skippedDesigns:[],errors:[]}}},M=function(e,n){let{position:i}=n;return{__typename:"Mutation",repositionImageDiffNote:{__typename:"RepositionImageDiffNotePayload",note:{...e,position:{...e.position,...i}},errors:[]}}},q=function(){return document.querySelector(".layout-page")},A=function(e){return`gid://gitlab/Todo/${e}`};var L=i("t9l/");const R=Object(L.g)("DesignManagement|Could not add a new comment. Please try again."),U=Object(L.g)("DesignManagement|Could not create new discussion. Please try again."),B=Object(L.g)("DesignManagement|Could not update discussion. Please try again."),z=Object(L.g)("DesignManagement|Could not update note. Please try again."),G=Object(L.g)("DesignManagement|Error uploading a new design. Please try again."),Q=Object(L.a)("Could not upload your designs as one or more files uploaded are not supported."),W=Object(L.a)("Could not find design."),H=Object(L.a)("Requested design version does not exist."),Y=Object(L.a)("You can only upload one design when dropping onto an existing design."),X=Object(L.a)("You must upload a file with the same file name when dropping onto an existing design."),K=Object(L.a)("Something went wrong when reordering designs. Please try again"),J=Object(L.a)("Failed to create a to-do item for the design."),Z=Object(L.a)("There is already a to-do item for this design."),ee=Object(L.a)("Failed to remove a to-do item for the design."),ne=Object(L.a)("Failed to toggle the to-do status for the design."),ie=Object(L.g)("DesignManagement|Upload skipped. %{reason}"),te=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return Object(L.f)("Failed to archive a design. Please try again.","Failed to archive designs. Please try again.",e)},ae=function(e,n){if(0===n.length)return null;if(n.length===e.length){const{filename:e}=n[0],i=Object(L.h)(Object(L.f)("DesignManagement|%{filename} did not change.","DesignManagement|The designs you tried uploading did not change.",n.length),{filename:e});return Object(L.h)(ie,{reason:i})}return function(e){const n=e.slice(0,5).map((function(e){let{filename:n}=e;return n})).join(", "),i=e.length>5?Object(L.h)(Object(L.g)("DesignManagement|Some of the designs you tried uploading did not change: %{skippedFiles} and %{moreCount} more."),{skippedFiles:n,moreCount:e.length-5}):Object(L.h)(Object(L.g)("DesignManagement|Some of the designs you tried uploading did not change: %{skippedFiles}."),{skippedFiles:n});return Object(L.h)(ie,{reason:i})}(n)},se=function(e){return e.project.issue.designCollection.designs},oe=function(e,n){throw Object(N.default)({message:n}),new Error(e.errors)},re=function(e){let{errors:n=[]}=e;return null==n?void 0:n.length},de=function(e,n,i,t){re(n)?oe(n,te(t.length)):(function(e,n,i){const t=e.readQuery(n),a=Object(c.a)(t,(function(e){const n=se(t).nodes.filter((function(e){return!i.includes(e.filename)}));se(e).nodes=[...n]}));e.writeQuery({...n,data:a})}(e,i,t),function(e,n,i){if(!i)return;const t=e.readQuery(n),a=Object(c.a)(t,(function(e){e.project.issue.designCollection.versions.nodes=[i,...e.project.issue.designCollection.versions.nodes]}));e.writeQuery({...n,data:a})}(e,i,n.version))},le=function(e,n,i,t){re(n)?oe(n,U):function(e,n,i,t){const a=e.readQuery({query:i,variables:t}),s={__typename:"Discussion",id:n.note.discussion.id,replyId:n.note.discussion.replyId,resolvable:!0,resolved:!1,resolvedAt:null,resolvedBy:null,notes:{__typename:"NoteConnection",nodes:[n.note]}},o=Object(c.a)(a,(function(e){const i=O(e);i.notesCount+=1,i.discussions.nodes=[...i.discussions.nodes,s],i.issue.participants.nodes.some((function(e){return e.username===n.note.author.username}))||(i.issue.participants.nodes=[...i.issue.participants.nodes,{__typename:"User",...n.note.author}])}));e.writeQuery({query:i,variables:t,data:o})}(e,n,i,t)},ue=function(e,n,i,t){re(n)?oe(n,B):function(e,n,i,t){const a=e.readQuery({query:i,variables:t}),s=Object(c.a)(a,(function(e){const i=O(e),t=(a=i.discussions,s=n.note.discussion.id,a.nodes.find((function(e){return e.id===s})));var a,s;t.notes={...t.notes,nodes:[n.note,...t.notes.nodes.slice(1)]}}));e.writeQuery({query:i,variables:t,data:s})}(e,n,i,t)},ce=function(e,n,i){re(n)?oe(n,n.errors[0]):function(e,n,i){const t=e.readQuery(i),a=Object(c.a)(t,(function(e){const i=V(e),t=S()(n.designs,i,"filename"),a=i.map((function(e){return n.designs.find((function(n){return n.filename===e.filename}))||e})).concat(t);let s;const o=n.designs.find((function(e){return e.versions}));if(o){const e=o.versions.nodes;e&&e.length&&(s=[e[0]])}const r={__typename:"DesignCollection",copyState:"READY",designs:{__typename:"DesignConnection",nodes:a},versions:{__typename:"DesignVersionConnection",nodes:[...s||[],...e.project.issue.designCollection.versions.nodes]}};e.project.issue.designCollection=r}));e.writeQuery({...i,data:a})}(e,n,i)},me=function(e,n,i){re(n)?Object(N.default)({message:n.errors[0]}):function(e,n,i){const t=e.readQuery(i),a=Object(c.a)(t,(function(e){e.project.issue.designCollection.designs=n.designCollection.designs}));e.writeQuery({...i,data:a})}(e,n,i)},ge=function(e,n,i,t){re(n)?oe(n,ee):function(e,n,i,t){const a=e.readQuery({query:i,variables:t}),{todo:{id:s}}=n,o=Object(c.a)(a,(function(e){var n;const i=O(e),t=(null===(n=i.currentUserTodos)||void 0===n?void 0:n.nodes)||[];i.currentUserTodos.nodes=t.filter((function(e){let{id:n}=e;return n!==s}))}));e.writeQuery({query:i,variables:t,data:o})}(e,n,i,t)};t.default.use(m.default);const fe={Mutation:{updateActiveDiscussion:function(e,n,i){let{id:t=null,source:a}=n,{cache:s}=i;const o=s.readQuery({query:p.a}),r=Object(c.a)(o,(function(e){e.activeDiscussion={__typename:"ActiveDiscussion",id:t,source:a}}));s.writeQuery({query:p.a,data:r})},createDesignTodo:function(e,n,i){let{projectPath:t,issueId:a,designId:s,issueIid:o,filenames:r,atVersion:d}=n,{cache:l}=i;return f.a.post(`/${t}/todos`,{issue_id:a,issuable_id:s,issuable_type:"design"}).then((function(e){let{data:n}=e;const{delete_path:i}=n,a=(i.match("todos/([0-9]+$)")||[])[1];if(!a)return{errors:[{message:Z}]};const s=function(e){return{__typename:"Todo",id:A(e)}}(a);return function(e,n,i,t){const a=e.readQuery({query:i,variables:t}),s=Object(c.a)(a,(function(e){var i;const t=O(e),a=[...(null===(i=t.currentUserTodos)||void 0===i?void 0:i.nodes)||[],{...n,__typename:"Todo"}];t.currentUserTodos?t.currentUserTodos.nodes=a:t.currentUserTodos={__typename:"TodoConnection",nodes:a}}));e.writeQuery({query:i,variables:t,data:s})}(l,s,k.a,{fullPath:t,iid:o,filenames:r,atVersion:d}),s}))}}},ve=Object(g.default)(fe,{cacheConfig:{dataIdFromObject:function(e){return"Design"===e.__typename?e.id&&e.image?`${e.id}-${e.image}`:l()():Object(u.b)(e)}},typeDefs:D.a});var pe=new m.default({defaultClient:ve}),he=i("rP6D"),ke=i("qjKb"),ye=i.n(ke),De=i("zLBL"),be=i("Q04j"),Se=i("O6x3"),Ne=i.n(Se),_e=i("uw3E"),we=i("WiJj"),Ee=i("Zxcm"),Fe=i("6TQR"),Ce=i.n(Fe),Ie=i("F5Vr"),Pe=i.n(Ie),xe={components:{ApolloMutation:m.ApolloMutation},inject:{projectPath:{default:""},iid:{from:"issueIid",defaut:""}},props:{filenames:{type:Array,required:!0}},computed:{projectQueryBody(){return{query:Ce.a,variables:{fullPath:this.projectPath,iid:this.iid,atVersion:null}}}},methods:{updateStoreAfterDelete(e,n){let{data:{designManagementDelete:i}}=n;de(e,i,this.projectQueryBody,this.filenames)}},destroyDesignMutation:Pe.a},Te=Object(o.a)(xe,(function(){var e=this,n=e.$createElement;return(e._self._c||n)("apollo-mutation",e._g({attrs:{mutation:e.$options.destroyDesignMutation,variables:{filenames:e.filenames,projectPath:e.projectPath,iid:e.iid},update:e.updateStoreAfterDelete,tag:null},scopedSlots:e._u([{key:"default",fn:function(n){var i=n.mutate,t=n.loading,a=n.error;return[e._t("default",null,null,{mutate:i,loading:t,error:a})]}}],null,!0)},e.$listeners))}),[],!1,null,null,null).exports,Ve=i("cuRJ"),Oe=i("lT7T"),je=i("mcoW"),$e={name:"DesignReplyForm",components:{MarkdownField:i("WW8A").a,GlButton:Ve.a,GlModal:Oe.a},props:{markdownPreviewPath:{type:String,required:!1,default:""},value:{type:String,required:!0},isSaving:{type:Boolean,required:!0},isNewComment:{type:Boolean,required:!1,default:!0}},data(){return{formText:this.value}},computed:{hasValue(){return this.value.trim().length>0},modalSettings(){return this.isNewComment?{title:Object(L.g)("DesignManagement|Cancel comment confirmation"),okTitle:Object(L.g)("DesignManagement|Discard comment"),cancelTitle:Object(L.g)("DesignManagement|Keep comment"),content:Object(L.g)("DesignManagement|Are you sure you want to cancel creating this comment?")}:{title:Object(L.g)("DesignManagement|Cancel comment update confirmation"),okTitle:Object(L.g)("DesignManagement|Cancel changes"),cancelTitle:Object(L.g)("DesignManagement|Keep changes"),content:Object(L.g)("DesignManagement|Are you sure you want to cancel changes to this comment?")}},buttonText(){return this.isNewComment?Object(L.g)("DesignManagement|Comment"):Object(L.g)("DesignManagement|Save comment")},markdownDocsPath:()=>Object(je.a)("user/markdown")},mounted(){this.focusInput()},methods:{submitForm(){this.hasValue&&this.$emit("submit-form")},cancelComment(){this.hasValue&&this.formText!==this.value?this.$refs.cancelCommentModal.show():this.$emit("cancel-form")},focusInput(){this.$refs.textarea.focus()}}},Me=Object(o.a)($e,(function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("form",{staticClass:"new-note common-note-form",on:{submit:function(e){e.preventDefault()}}},[i("markdown-field",{staticClass:"bordered-box",attrs:{"markdown-preview-path":e.markdownPreviewPath,"can-attach-file":!1,"enable-autocomplete":!0,"textarea-value":e.value,"markdown-docs-path":e.markdownDocsPath},scopedSlots:e._u([{key:"textarea",fn:function(){return[i("textarea",{ref:"textarea",staticClass:"note-textarea js-gfm-input js-autosize markdown-area",attrs:{dir:"auto","data-supports-quick-actions":"false","data-qa-selector":"note_textarea","aria-label":e.__("Description"),placeholder:e.__("Write a comment")},domProps:{value:e.value},on:{input:function(n){return e.$emit("input",n.target.value)},keydown:[function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:n.metaKey?e.submitForm(n):null},function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:n.ctrlKey?e.submitForm(n):null}],keyup:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"esc",27,n.key,["Esc","Escape"])?null:(n.stopPropagation(),e.cancelComment(n))}}})]},proxy:!0}])}),e._v(" "),e._t("resolve-checkbox"),e._v(" "),i("div",{staticClass:"note-form-actions gl-display-flex"},[i("gl-button",{ref:"submitButton",staticClass:"gl-mr-3 gl-w-auto!",attrs:{disabled:!e.hasValue||e.isSaving,category:"primary",variant:"confirm",type:"submit","data-track-action":"click_button","data-qa-selector":"save_comment_button"},on:{click:function(n){return e.$emit("submit-form")}}},[e._v("\n      "+e._s(e.buttonText)+"\n    ")]),e._v(" "),i("gl-button",{ref:"cancelButton",staticClass:"gl-w-auto!",attrs:{variant:"default",category:"primary"},on:{click:e.cancelComment}},[e._v(e._s(e.__("Cancel")))])],1),e._v(" "),i("gl-modal",{ref:"cancelCommentModal",attrs:{"ok-variant":"danger",title:e.modalSettings.title,"ok-title":e.modalSettings.okTitle,"cancel-title":e.modalSettings.cancelTitle,"modal-id":"cancel-comment-modal"},on:{ok:function(n){return e.$emit("cancel-form")}}},[e._v(e._s(e.modalSettings.content)+"\n  ")])],2)}),[],!1,null,null,null).exports,qe=i("uJ0F"),Ae=i.n(qe),Le=i("oj/M"),Re=i("CgKM"),Ue=i("GSdU"),Be=i.n(Ue),ze={name:"DesignOverlay",components:{DesignNotePin:Re.a},props:{dimensions:{type:Object,required:!0},position:{type:Object,required:!0},notes:{type:Array,required:!1,default:function(){return[]}},currentCommentForm:{type:Object,required:!1,default:null},disableCommenting:{type:Boolean,required:!1,default:!1},resolvedDiscussionsExpanded:{type:Boolean,required:!0}},apollo:{activeDiscussion:{query:p.a}},data:()=>({movingNoteNewPosition:null,movingNoteStartPosition:null,activeDiscussion:{}}),computed:{overlayStyle(){return{cursor:this.disableCommenting?"unset":void 0,width:`${this.dimensions.width}px`,height:`${this.dimensions.height}px`,...this.position}},isMovingCurrentComment(){return Boolean(this.movingNoteStartPosition&&!this.movingNoteStartPosition.noteId)},currentCommentPositionStyle(){return this.isMovingCurrentComment&&this.movingNoteNewPosition?this.getNotePositionStyle(this.movingNoteNewPosition):this.getNotePositionStyle(this.currentCommentForm)},visibleNotes(){return this.resolvedDiscussionsExpanded?this.notes:this.notes.filter((function(e){return!e.resolved}))}},methods:{setNewNoteCoordinates(e){let{x:n,y:i}=e;this.$emit("openCommentForm",{x:n,y:i})},getNoteRelativePosition(e){const{x:n,y:i,width:t,height:a}=e,s=this.dimensions.width/t,o=this.dimensions.height/a;return{left:Math.round(n*s),top:Math.round(i*o)}},getNotePositionStyle(e){const{left:n,top:i}=this.getNoteRelativePosition(e);return{left:`${n}px`,top:`${i}px`}},getMovingNotePositionDelta(e){let n=0,i=0;if(this.movingNoteStartPosition){const{clientX:t,clientY:a}=this.movingNoteStartPosition;n=e.clientX-t,i=e.clientY-a}return{deltaX:n,deltaY:i}},isMovingNote(e){var n;const i=null===(n=this.movingNoteStartPosition)||void 0===n?void 0:n.noteId;return Boolean(i&&i===e)},canMoveNote(e){const{userPermissions:n}=e,{repositionNote:i}=n||{};return Boolean(i)},isPositionInOverlay(e){const{top:n,left:i}=this.getNoteRelativePosition(e),{height:t,width:a}=this.dimensions;return n>=0&&n<=t&&i>=0&&i<=a},onNewNoteMove(e){if(!this.isMovingCurrentComment)return;const{deltaX:n,deltaY:i}=this.getMovingNotePositionDelta(e),t={x:this.currentCommentForm.x+n,y:this.currentCommentForm.y+i,width:this.dimensions.width,height:this.dimensions.height};this.isPositionInOverlay(t)?this.movingNoteNewPosition=t:this.onNewNoteMouseup()},onExistingNoteMove(e){var n=this;const i=this.notes.find((function(e){let{id:i}=e;return i===n.movingNoteStartPosition.noteId}));if(!i||!this.canMoveNote(i))return;const{position:t}=i,{width:a,height:s}=t,o=this.dimensions.width/a,r=this.dimensions.height/s,{deltaX:d,deltaY:l}=this.getMovingNotePositionDelta(e),u={x:t.x*o+d,y:t.y*r+l,width:this.dimensions.width,height:this.dimensions.height};this.isPositionInOverlay(u)?this.movingNoteNewPosition=u:this.onExistingNoteMouseup()},onNewNoteMouseup(){if(!this.movingNoteNewPosition)return;const{x:e,y:n}=this.movingNoteNewPosition;this.setNewNoteCoordinates({x:e,y:n})},onExistingNoteMouseup(e){if(!this.movingNoteStartPosition||!this.movingNoteNewPosition)return this.updateActiveDiscussion(e.id),void this.$emit("closeCommentForm");const{x:n,y:i}=this.movingNoteNewPosition;this.$emit("moveNote",{noteId:this.movingNoteStartPosition.noteId,discussionId:this.movingNoteStartPosition.discussionId,coordinates:{x:n,y:i}})},onNoteMousedown(e,n){let{clientX:i,clientY:t}=e;this.movingNoteStartPosition={noteId:null==n?void 0:n.id,discussionId:null==n?void 0:n.discussion.id,clientX:i,clientY:t}},onOverlayMousemove(e){this.movingNoteStartPosition&&(this.isMovingCurrentComment?this.onNewNoteMove(e):this.onExistingNoteMove(e))},onNoteMouseup(e){this.movingNoteStartPosition&&(this.isMovingCurrentComment?this.onNewNoteMouseup():this.onExistingNoteMouseup(e),this.movingNoteStartPosition=null,this.movingNoteNewPosition=null)},onAddCommentMouseup(e){let{offsetX:n,offsetY:i}=e;this.disableCommenting||(this.activeDiscussion.id&&this.updateActiveDiscussion(),this.setNewNoteCoordinates({x:n,y:i}))},updateActiveDiscussion(e){this.$apollo.mutate({mutation:Be.a,variables:{id:e,source:w}})},isNoteInactive(e){var n=this;const i=e.discussion.notes.nodes||[];return this.activeDiscussion.id&&!i.some((function(e){let{id:i}=e;return i===n.activeDiscussion.id}))}},i18n:{newCommentButtonLabel:Object(L.a)("Add comment to design")}},Ge=Object(o.a)(ze,(function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("div",{staticClass:"gl-absolute gl-top-0 gl-left-0 frame",style:e.overlayStyle,on:{mousemove:e.onOverlayMousemove,mouseleave:e.onNoteMouseup}},[i("button",{directives:[{name:"show",rawName:"v-show",value:!e.disableCommenting,expression:"!disableCommenting"}],staticClass:"gl-absolute gl-w-full gl-h-full gl-p-0 gl-top-0 gl-left-0 gl-outline-0! btn-transparent gl-hover-cursor-crosshair",attrs:{type:"button",role:"button","aria-label":e.$options.i18n.newCommentButtonLabel,"data-qa-selector":"design_image_button"},on:{mouseup:e.onAddCommentMouseup}}),e._v(" "),e._l(e.visibleNotes,(function(n){return i("design-note-pin",{key:n.id,attrs:{label:n.index,position:e.isMovingNote(n.id)&&e.movingNoteNewPosition?e.getNotePositionStyle(e.movingNoteNewPosition):e.getNotePositionStyle(n.position),"is-inactive":e.isNoteInactive(n),"is-resolved":n.resolved,"is-on-image":""},on:{mousedown:function(i){return i.stopPropagation(),e.onNoteMousedown(i,n)},mouseup:function(i){return i.stopPropagation(),e.onNoteMouseup(n)}}})})),e._v(" "),e.currentCommentForm?i("design-note-pin",{attrs:{position:e.currentCommentPositionStyle},on:{mousedown:function(n){return n.stopPropagation(),e.onNoteMousedown(n)},mouseup:function(n){return n.stopPropagation(),e.onNoteMouseup(n)}}}):e._e()],2)}),[],!1,null,null,null).exports,Qe=i("H8gz"),We={components:{GlIcon:Qe.a},props:{image:{type:String,required:!1,default:""},name:{type:String,required:!1,default:""},scale:{type:Number,required:!1,default:1}},data:()=>({baseImageSize:null,imageStyle:null,imageError:!1}),watch:{scale(e){this.zoom(e)}},beforeDestroy(){window.removeEventListener("resize",this.resizeThrottled,!1)},mounted(){var e=this;this.image||this.onImgLoad(),this.resizeThrottled=Ae()((function(){e.setBaseImageSize()}),400),window.addEventListener("resize",this.resizeThrottled,!1)},methods:{onImgLoad(){requestIdleCallback(this.setBaseImageSize,{timeout:1e3}),requestIdleCallback(this.setImageNaturalScale,{timeout:1e3}),Object(s.a)({measures:[{name:a.a,start:a.b}]})},onImgError(){this.imageError=!0},setBaseImageSize(){const{contentImg:e}=this.$refs;e&&0!==e.offsetHeight&&0!==e.offsetWidth&&(this.baseImageSize={height:e.offsetHeight,width:e.offsetWidth},this.onResize({width:this.baseImageSize.width,height:this.baseImageSize.height}))},setImageNaturalScale(){const{contentImg:e}=this.$refs;if(!e)return;const{naturalHeight:n,naturalWidth:i}=e;if(0===n||0===i)return;const{height:t,width:a}=this.baseImageSize;this.$parent.$emit("setMaxScale",Math.round((t+a)/(n+i)*100)/100)},onResize(e){let{width:n,height:i}=e;this.$emit("resize",{width:n,height:i})},zoom(e){var n=this;if(1===e)return this.imageStyle=null,void this.$nextTick((function(){n.setBaseImageSize()}));const i=this.baseImageSize.width*e,t=this.baseImageSize.height*e;this.imageStyle={width:`${i}px`,height:`${t}px`},this.onResize({width:i,height:t})}}},He=Object(o.a)(We,(function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("div",{staticClass:"gl-mx-auto gl-my-auto js-design-image"},[e.imageError?i("gl-icon",{staticClass:"gl-text-gray-200",attrs:{name:"media-broken",size:48}}):e._e(),e._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:!e.imageError,expression:"!imageError"}],ref:"contentImg",staticClass:"mh-100",class:{"img-fluid":!e.imageStyle},style:e.imageStyle,attrs:{src:e.image,alt:e.name},on:{error:e.onImgError,load:e.onImgLoad}})],1)}),[],!1,null,null,null).exports;var Ye={components:{DesignImage:He,DesignOverlay:Ge},props:{image:{type:String,required:!1,default:""},imageName:{type:String,required:!1,default:""},discussions:{type:Array,required:!0},isAnnotating:{type:Boolean,required:!1,default:!1},scale:{type:Number,required:!1,default:1},resolvedDiscussionsExpanded:{type:Boolean,required:!0}},data:()=>({overlayDimensions:null,overlayPosition:null,currentAnnotationPosition:null,zoomFocalPoint:{x:0,y:0,width:0,height:0},initialLoad:!0,lastDragPosition:null,isDraggingDesign:!1,isLoggedIn:Object(Le.B)()}),computed:{discussionStartingNotes(){return this.discussions.map((function(e){return{...e.notes[0],index:e.index}}))},currentCommentForm(){return this.isAnnotating&&this.currentAnnotationPosition||null},presentationStyle(){return{cursor:this.isDraggingDesign?"grabbing":void 0}}},beforeDestroy(){const{presentationViewport:e}=this.$refs;e&&e.removeEventListener("scroll",this.scrollThrottled,!1)},mounted(){var e=this;const{presentationViewport:n}=this.$refs;n&&(this.scrollThrottled=Ae()((function(){e.shiftZoomFocalPoint()}),400),n.addEventListener("scroll",this.scrollThrottled,!1))},methods:{syncCurrentAnnotationPosition(){if(!this.currentAnnotationPosition)return;const e=this.overlayDimensions.width/this.currentAnnotationPosition.width,n=this.overlayDimensions.height/this.currentAnnotationPosition.height,i=this.currentAnnotationPosition.x*e,t=this.currentAnnotationPosition.y*n;this.currentAnnotationPosition=this.getAnnotationPositon({x:i,y:t})},setOverlayDimensions(e){this.overlayDimensions=e,this.syncCurrentAnnotationPosition()},setOverlayPosition(){this.overlayDimensions||(this.overlayPosition={});const{presentationViewport:e}=this.$refs;e&&(this.overlayPosition={left:`calc(50% - ${this.overlayDimensions.width/2}px)`,top:`calc(50% - ${this.overlayDimensions.height/2}px)`},this.overlayDimensions.width>e.offsetWidth&&(this.overlayPosition.left="0"),this.overlayDimensions.height>e.offsetHeight&&(this.overlayPosition.top="0"))},getViewportCenter(){const{presentationViewport:e}=this.$refs;if(!e)return{};const n=e.scrollWidth-e.offsetWidth,i=e.scrollHeight-e.offsetHeight,t=e.scrollLeft>0?e.scrollLeft/n:0,a=e.scrollTop>0?e.scrollTop/i:0,s=(e.scrollWidth-e.offsetWidth-0)*t,o=(e.scrollHeight-e.offsetHeight-0)*a;return{x:e.offsetWidth/2+s,y:e.offsetHeight/2+o}},scrollToFocalPoint(){const{presentationViewport:e}=this.$refs;if(!e)return;const n=this.zoomFocalPoint.x-e.offsetWidth/2,i=this.zoomFocalPoint.y-e.offsetHeight/2;e.scrollTo(n,i)},scaleZoomFocalPoint(){const{x:e,y:n,width:i,height:t}=this.zoomFocalPoint,a=this.overlayDimensions.width/i,s=this.overlayDimensions.height/t;this.zoomFocalPoint={x:Math.round(e*a*100)/100,y:Math.round(n*s*100)/100,...this.overlayDimensions}},shiftZoomFocalPoint(){this.zoomFocalPoint={...this.getViewportCenter(),...this.overlayDimensions}},onImageResize(e){var n=this;this.setOverlayDimensions(e),this.setOverlayPosition(),this.$nextTick((function(){n.initialLoad?(n.shiftZoomFocalPoint(),n.initialLoad=!1):(n.scaleZoomFocalPoint(),n.scrollToFocalPoint())}))},getAnnotationPositon(e){const{x:n,y:i}=e,{width:t,height:a}=this.overlayDimensions;return{x:Math.round(n),y:Math.round(i),width:Math.round(t),height:Math.round(a)}},openCommentForm(e){this.currentAnnotationPosition=this.getAnnotationPositon(e),this.$emit("openCommentForm",this.currentAnnotationPosition)},closeCommentForm(){this.currentAnnotationPosition=null,this.$emit("closeCommentForm")},moveNote(e){let{noteId:n,discussionId:i,coordinates:t}=e;const a=this.getAnnotationPositon(t);this.$emit("moveNote",{noteId:n,discussionId:i,position:a})},onPresentationMousedown(e){let{clientX:n,clientY:i}=e;this.isDesignOverflowing()&&(this.lastDragPosition={x:n,y:i})},getDragDelta(e,n){return{deltaX:this.lastDragPosition.x-e,deltaY:this.lastDragPosition.y-n}},exceedsDragThreshold(e,n){const{deltaX:i,deltaY:t}=this.getDragDelta(e,n);return Math.abs(i)>2||Math.abs(t)>2},shouldDragDesign(e,n){return this.lastDragPosition&&(this.isDraggingDesign||this.exceedsDragThreshold(e,n))},onPresentationMousemove(e){let{clientX:n,clientY:i}=e;const{presentationViewport:t}=this.$refs;if(!t||!this.shouldDragDesign(n,i))return;this.isDraggingDesign=!0;const{scrollLeft:a,scrollTop:s}=t,{deltaX:o,deltaY:r}=this.getDragDelta(n,i);t.scrollTo(a+o,s+r),this.lastDragPosition={x:n,y:i}},onPresentationMouseup(){this.lastDragPosition=null,this.isDraggingDesign=!1},isDesignOverflowing(){const{presentationViewport:e}=this.$refs;return!!e&&(e.scrollWidth>e.offsetWidth||e.scrollHeight>e.offsetHeight)}}},Xe=Object(o.a)(Ye,(function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("div",{ref:"presentationViewport",staticClass:"gl-h-full gl-w-full gl-p-5 overflow-auto gl-relative",style:e.presentationStyle,on:{mousedown:e.onPresentationMousedown,mousemove:e.onPresentationMousemove,mouseup:e.onPresentationMouseup,mouseleave:e.onPresentationMouseup,touchstart:e.onPresentationMousedown,touchmove:e.onPresentationMousemove,touchend:e.onPresentationMouseup,touchcancel:e.onPresentationMouseup}},[i("div",{staticClass:"gl-h-full gl-w-full gl-display-flex gl-align-items-center gl-relative"},[e.image?i("design-image",{attrs:{image:e.image,name:e.imageName,scale:e.scale},on:{resize:e.onImageResize}}):e._e(),e._v(" "),e.overlayDimensions&&e.overlayPosition?i("design-overlay",{attrs:{dimensions:e.overlayDimensions,position:e.overlayPosition,notes:e.discussionStartingNotes,"current-comment-form":e.currentCommentForm,"disable-commenting":!e.isLoggedIn||e.isDraggingDesign,"resolved-discussions-expanded":e.resolvedDiscussionsExpanded},on:{openCommentForm:e.openCommentForm,closeCommentForm:e.closeCommentForm,moveNote:e.moveNote}}):e._e()],1)])}),[],!1,null,null,null).exports,Ke=i("ZplN");var Je={components:{GlButtonGroup:Ke.a,GlButton:Ve.a},props:{maxScale:{type:Number,required:!0}},data:()=>({scale:1}),computed:{disableReset(){return this.scale<=1},disableDecrease(){return 1===this.scale},disableIncrease(){return this.scale>=this.maxScale},stepSize(){return(this.maxScale-1)/5}},methods:{setScale(e){e<1||(this.scale=Math.round(100*e)/100,this.$emit("scale",this.scale))},incrementScale(){this.setScale(Math.min(this.scale+this.stepSize,this.maxScale))},decrementScale(){this.setScale(Math.max(this.scale-this.stepSize,1))},resetScale(){this.setScale(1)}}},Ze=Object(o.a)(Je,(function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("gl-button-group",{staticClass:"gl-z-index-1"},[i("gl-button",{attrs:{icon:"dash",disabled:e.disableDecrease,"aria-label":e.__("Decrease")},on:{click:e.decrementScale}}),e._v(" "),i("gl-button",{attrs:{icon:"redo",disabled:e.disableReset,"aria-label":e.__("Reset")},on:{click:e.resetScale}}),e._v(" "),i("gl-button",{attrs:{icon:"plus",disabled:e.disableIncrease,"aria-label":e.__("Increase")},on:{click:e.incrementScale}})],1)}),[],!1,null,null,null).exports,en=i("Cbzh"),nn=i("KFH7"),tn=i("aeXO"),an=i("u1ru"),sn=i("ly/8"),on=i("XR+4"),rn=i("LcVr"),dn=i("MLrR"),ln=i.n(dn),un=i("OUnR"),cn=i.n(un),mn={apollo:{allVersions:{query:Ce.a,variables(){return{fullPath:this.projectPath,iid:this.issueIid,atVersion:null}},update:function(e){return e.project.issue.designCollection.versions.nodes}}},inject:{projectPath:{default:""},issueIid:{default:""}},computed:{hasValidVersion(){var e=this;return this.$route.query.version&&this.allVersions&&this.allVersions.some((function(n){return n.id.endsWith(e.$route.query.version)}))},designsVersion(){return this.hasValidVersion?`gid://gitlab/DesignManagement::Version/${this.$route.query.version}`:null},latestVersionId(){const e=this.allVersions[0];return e&&x(e.id)},isLatestVersion(){return!(this.allVersions.length>0)||(!this.$route.query.version||!this.latestVersionId||this.$route.query.version===this.latestVersionId)}},data:()=>({allVersions:[]})},gn=i("cmjF"),fn=i("EtIY"),vn=i("9LGn"),pn=i("+lve"),hn=i("1jid"),kn=i("0jMo"),yn=i.n(kn),Dn={i18n:{editCommentLabel:Object(L.a)("Edit comment")},components:{ApolloMutation:m.ApolloMutation,DesignReplyForm:Me,GlAvatar:gn.a,GlAvatarLink:fn.a,GlButton:Ve.a,GlLink:an.a,TimeAgoTooltip:rn.a,TimelineEntryItem:hn.a},directives:{GlTooltip:sn.a,SafeHtml:vn.a},props:{note:{type:Object,required:!0},markdownPreviewPath:{type:String,required:!1,default:""}},data(){return{noteText:this.note.body,isEditing:!1}},computed:{author(){return this.note.author},authorId(){return Object(pn.e)(this.author.id)},noteAnchorId(){return(this.note.id.match("DiffNote/(.+$)")||[])[1]},isNoteLinked(){return j(this.$route.hash)===this.noteAnchorId},mutationPayload(){return{id:this.note.id,body:this.noteText}},isEditButtonVisible(){return!this.isEditing&&this.note.userPermissions.adminNote}},methods:{hideForm(){this.isEditing=!1,this.noteText=this.note.body},onDone(e){let{data:n}=e;this.hideForm(),re(n.updateNote)&&this.$emit("error",n.errors[0])}},updateNoteMutation:yn.a},bn=Object(o.a)(Dn,(function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("timeline-entry-item",{staticClass:"design-note note-form",attrs:{id:"note_"+e.noteAnchorId}},[i("gl-avatar-link",{staticClass:"gl-float-left gl-mr-3",attrs:{href:e.author.webUrl}},[i("gl-avatar",{attrs:{size:32,src:e.author.avatarUrl,"entity-name":e.author.username}})],1),e._v(" "),i("div",{staticClass:"gl-display-flex gl-justify-content-space-between"},[i("div",[e._m(0),e._v(" "),i("span",{staticClass:"note-headline-light note-headline-meta"},[i("span",{staticClass:"system-note-message"},[e._t("default")],2),e._v(" "),i("gl-link",{staticClass:"note-timestamp system-note-separator gl-display-block gl-mb-2",attrs:{href:"#note_"+e.noteAnchorId}},[i("time-ago-tooltip",{attrs:{time:e.note.createdAt,"tooltip-placement":"bottom"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"gl-display-flex gl-align-items-baseline"},[e._t("resolve-discussion"),e._v(" "),e.isEditButtonVisible?i("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],attrs:{"aria-label":e.$options.i18n.editCommentLabel,title:e.$options.i18n.editCommentLabel,category:"tertiary","data-testid":"note-edit",icon:"pencil",size:"small"},on:{click:function(n){e.isEditing=!0}}}):e._e()],2)]),e._v(" "),e.isEditing?i("apollo-mutation",{attrs:{mutation:e.$options.updateNoteMutation,variables:{input:e.mutationPayload}},on:{error:function(n){return e.$emit("error",n)},done:e.onDone},scopedSlots:e._u([{key:"default",fn:function(n){var t=n.mutate,a=n.loading;return[i("design-reply-form",{staticClass:"gl-mt-5",attrs:{"is-saving":a,"markdown-preview-path":e.markdownPreviewPath,"is-new-comment":!1},on:{"submit-form":t,"cancel-form":e.hideForm},model:{value:e.noteText,callback:function(n){e.noteText=n},expression:"noteText"}})]}}])}):[i("div",{directives:[{name:"safe-html",rawName:"v-safe-html",value:e.note.bodyHtml,expression:"note.bodyHtml"}],staticClass:"note-text md",attrs:{"data-qa-selector":"note_content","data-testid":"note-text"}}),e._v(" "),e._t("resolved-status")]],2)}),[function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("gl-link",{staticClass:"js-user-link",attrs:{href:e.author.webUrl,"data-testid":"user-link","data-user-id":e.authorId,"data-username":e.author.username}},[i("span",{staticClass:"note-header-author-name gl-font-weight-bold"},[e._v(e._s(e.author.name))]),e._v(" "),e.author.status_tooltip_html?i("span",{directives:[{name:"safe-html",rawName:"v-safe-html",value:e.author.status_tooltip_html,expression:"author.status_tooltip_html"}]}):e._e(),e._v(" "),i("span",{staticClass:"note-headline-light"},[e._v("@"+e._s(e.author.username))])])}],!1,null,null,null).exports,Sn=i("nPFI"),Nn={components:{GlSprintf:Sn.a,GlLink:an.a},props:{registerPath:{type:String,required:!0},signInPath:{type:String,required:!0},isAddDiscussion:{type:Boolean,required:!1,default:!1}},computed:{signedOutText(){return this.isAddDiscussion?Object(L.a)("Please %{registerLinkStart}register%{registerLinkEnd} or %{signInLinkStart}sign in%{signInLinkEnd} to start a new discussion."):Object(L.a)("Please %{registerLinkStart}register%{registerLinkEnd} or %{signInLinkStart}sign in%{signInLinkEnd} to reply.")}}},_n=Object(o.a)(Nn,(function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("div",{staticClass:"disabled-comment text-center"},[i("gl-sprintf",{attrs:{message:e.signedOutText},scopedSlots:e._u([{key:"registerLink",fn:function(n){var t=n.content;return[i("gl-link",{attrs:{href:e.registerPath}},[e._v(e._s(t))])]}},{key:"signInLink",fn:function(n){var t=n.content;return[i("gl-link",{attrs:{href:e.signInPath}},[e._v(e._s(t))])]}}])})],1)}),[],!1,null,null,null).exports,wn={name:"ToggleNotesWidget",components:{GlIcon:Qe.a,GlButton:Ve.a,GlLink:an.a,TimeAgoTooltip:rn.a},props:{collapsed:{type:Boolean,required:!0},replies:{type:Array,required:!0}},computed:{lastReply(){return this.replies[this.replies.length-1]},iconName(){return this.collapsed?"chevron-right":"chevron-down"},toggleText(){return this.collapsed?`${this.replies.length} ${Object(L.f)("reply","replies",this.replies.length)}`:Object(L.a)("Collapse replies")}}},En=Object(o.a)(wn,(function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("li",{staticClass:"toggle-comments gl-bg-gray-50 gl-display-flex gl-align-items-center gl-py-3",class:{expanded:!e.collapsed},attrs:{"data-testid":"toggle-comments-wrapper"}},[i("gl-icon",{staticClass:"gl-ml-3",attrs:{name:e.iconName},on:{click:function(n){return n.stopPropagation(),e.$emit("toggle")}}}),e._v(" "),i("gl-button",{staticClass:"toggle-comments-button gl-ml-2 gl-mr-2",attrs:{variant:"link"},on:{click:function(n){return n.stopPropagation(),e.$emit("toggle")}}},[e._v("\n    "+e._s(e.toggleText)+"\n  ")]),e._v(" "),e.collapsed?[i("span",{staticClass:"gl-text-gray-500"},[e._v(e._s(e.__("Last reply by")))]),e._v(" "),i("gl-link",{staticClass:"link-inherit-color gl-text-body gl-text-decoration-none gl-font-weight-bold gl-ml-2 gl-mr-2",attrs:{href:e.lastReply.author.webUrl,target:"_blank"}},[e._v("\n      "+e._s(e.lastReply.author.name)+"\n    ")]),e._v(" "),i("time-ago-tooltip",{staticClass:"gl-text-gray-500",attrs:{time:e.lastReply.createdAt,"tooltip-placement":"bottom"}})]:e._e()],2)}),[],!1,null,null,null).exports,Fn={components:{ApolloMutation:m.ApolloMutation,DesignNote:bn,DesignNotePin:Re.a,DesignNoteSignedOut:_n,DesignReplyForm:Me,GlButton:Ve.a,GlLink:an.a,ReplyPlaceholder:on.a,TimeAgoTooltip:rn.a,ToggleRepliesWidget:En},directives:{GlTooltip:sn.a},mixins:[mn],props:{discussion:{type:Object,required:!0},noteableId:{type:String,required:!0},designId:{type:String,required:!0},markdownPreviewPath:{type:String,required:!1,default:""},registerPath:{type:String,required:!0},signInPath:{type:String,required:!0},resolvedDiscussionsExpanded:{type:Boolean,required:!0},discussionWithOpenForm:{type:String,required:!0}},apollo:{activeDiscussion:{query:p.a,result(e){var n=this;let{data:i}=e;this.discussion.resolved&&!this.resolvedDiscussionsExpanded||this.$nextTick((function(){n.$el&&n.shouldScrollToDiscussion(i.activeDiscussion)&&n.$el.scrollIntoView({behavior:"smooth",inline:"start"})}))}}},data(){return{discussionComment:"",isFormRendered:!1,activeDiscussion:{},isResolving:!1,shouldChangeResolvedStatus:!1,areRepliesCollapsed:this.discussion.resolved,isLoggedIn:Object(Le.B)()}},computed:{mutationPayload(){return{noteableId:this.noteableId,body:this.discussionComment,discussionId:this.discussion.id}},designVariables(){return{fullPath:this.projectPath,iid:this.issueIid,filenames:[this.$route.params.id],atVersion:this.designsVersion}},isDiscussionActive(){var e=this;return this.discussion.notes.some((function(n){let{id:i}=n;return i===e.activeDiscussion.id}))},resolveCheckboxText(){return this.discussion.resolved?Object(L.g)("DesignManagement|Unresolve thread"):Object(L.g)("DesignManagement|Resolve thread")},firstNote(){return this.discussion.notes[0]},discussionReplies(){return this.discussion.notes.slice(1)},areRepliesShown(){return!this.discussion.resolved||!this.areRepliesCollapsed},resolveIconName(){return this.discussion.resolved?"check-circle-filled":"check-circle"},isRepliesWidgetVisible(){return this.discussion.resolved&&this.discussionReplies.length>0},isReplyPlaceholderVisible(){return this.areRepliesShown||!this.discussionReplies.length},isFormVisible(){return this.isFormRendered&&this.discussionWithOpenForm===this.discussion.id}},methods:{onDone(e){let{data:{createNote:n}}=e;re(n)&&Object(N.default)({message:R}),this.discussionComment="",this.hideForm(),this.shouldChangeResolvedStatus&&this.toggleResolvedStatus()},onCreateNoteError(e){this.$emit("create-note-error",e)},hideForm(){this.isFormRendered=!1,this.discussionComment=""},showForm(){this.$emit("open-form",this.discussion.id),this.isFormRendered=!0},toggleResolvedStatus(){var e,n,i=this;this.isResolving=!0;const{defaultClient:t}=this.$apollo.provider.clients,a=t.readQuery({query:k.a,variables:this.designVariables}),s=(null===(e=O(a).currentUserTodos)||void 0===e?void 0:null===(n=e.nodes)||void 0===n?void 0:n.length)||0;this.$apollo.mutate({mutation:cn.a,variables:{id:this.discussion.id,resolve:!this.discussion.resolved}}).then((function(e){var n,t,a,o,r,d;let{data:l}=e;(null===(n=l.errors)||void 0===n?void 0:n.length)>0&&i.$emit("resolve-discussion-error",l.errors[0]);const u=(null==l?void 0:null===(t=l.discussionToggleResolve)||void 0===t?void 0:null===(a=t.discussion)||void 0===a?void 0:null===(o=a.noteable)||void 0===o?void 0:null===(r=o.currentUserTodos)||void 0===r?void 0:null===(d=r.nodes)||void 0===d?void 0:d.length)||0;Object(we.b)(u-s)})).catch((function(e){i.$emit("resolve-discussion-error",e)})).finally((function(){i.isResolving=!1}))},shouldScrollToDiscussion(e){const n=[w,F],{source:i}=e;return n.includes(i)&&this.isDiscussionActive}},createNoteMutation:ln.a},Cn=Object(o.a)(Fn,(function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("div",{staticClass:"design-discussion-wrapper"},[i("design-note-pin",{attrs:{"is-resolved":e.discussion.resolved,label:e.discussion.index}}),e._v(" "),i("ul",{staticClass:"design-discussion bordered-box gl-relative gl-p-0 gl-list-style-none",attrs:{"data-qa-selector":"design_discussion_content"}},[i("design-note",{class:{"gl-bg-blue-50":e.isDiscussionActive},attrs:{note:e.firstNote,"markdown-preview-path":e.markdownPreviewPath,"is-resolving":e.isResolving},on:{error:function(n){return e.$emit("update-note-error",n)}},scopedSlots:e._u([e.isLoggedIn&&e.discussion.resolvable?{key:"resolve-discussion",fn:function(){return[i("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],attrs:{"aria-label":e.resolveCheckboxText,icon:e.resolveIconName,title:e.resolveCheckboxText,loading:e.isResolving,category:"tertiary","data-testid":"resolve-button",size:"small"},on:{click:function(n){return n.stopPropagation(),e.toggleResolvedStatus(n)}}})]},proxy:!0}:null,e.discussion.resolved?{key:"resolved-status",fn:function(){return[i("p",{staticClass:"gl-text-gray-500 gl-font-sm gl-m-0 gl-mt-5",attrs:{"data-testid":"resolved-message"}},[e._v("\n          "+e._s(e.__("Resolved by"))+"\n          "),i("gl-link",{staticClass:"gl-text-gray-500 gl-text-decoration-none gl-font-sm link-inherit-color",attrs:{href:e.discussion.resolvedBy.webUrl,target:"_blank"}},[e._v(e._s(e.discussion.resolvedBy.name))]),e._v(" "),i("time-ago-tooltip",{attrs:{time:e.discussion.resolvedAt,"tooltip-placement":"bottom"}})],1)]},proxy:!0}:null],null,!0)}),e._v(" "),e.isRepliesWidgetVisible?i("toggle-replies-widget",{attrs:{collapsed:e.areRepliesCollapsed,replies:e.discussionReplies},on:{toggle:function(n){e.areRepliesCollapsed=!e.areRepliesCollapsed}}}):e._e(),e._v(" "),e._l(e.discussionReplies,(function(n){return i("design-note",{directives:[{name:"show",rawName:"v-show",value:e.areRepliesShown,expression:"areRepliesShown"}],key:n.id,class:{"gl-bg-blue-50":e.isDiscussionActive},attrs:{note:n,"markdown-preview-path":e.markdownPreviewPath,"is-resolving":e.isResolving},on:{error:function(n){return e.$emit("update-note-error",n)}}})})),e._v(" "),i("li",{directives:[{name:"show",rawName:"v-show",value:e.isReplyPlaceholderVisible,expression:"isReplyPlaceholderVisible"}],staticClass:"reply-wrapper discussion-reply-holder",class:{"gl-bg-gray-10":!e.isLoggedIn}},[e.isLoggedIn?[e.isFormVisible?i("apollo-mutation",{attrs:{mutation:e.$options.createNoteMutation,variables:{input:e.mutationPayload}},on:{done:e.onDone,error:e.onCreateNoteError},scopedSlots:e._u([{key:"default",fn:function(n){var t=n.mutate,a=n.loading;return[i("design-reply-form",{attrs:{"is-saving":a,"markdown-preview-path":e.markdownPreviewPath},on:{"submit-form":t,"cancel-form":e.hideForm},scopedSlots:e._u([e.discussion.resolvable?{key:"resolve-checkbox",fn:function(){return[i("label",{attrs:{"data-testid":"resolve-checkbox"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.shouldChangeResolvedStatus,expression:"shouldChangeResolvedStatus"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.shouldChangeResolvedStatus)?e._i(e.shouldChangeResolvedStatus,null)>-1:e.shouldChangeResolvedStatus},on:{change:function(n){var i=e.shouldChangeResolvedStatus,t=n.target,a=!!t.checked;if(Array.isArray(i)){var s=e._i(i,null);t.checked?s<0&&(e.shouldChangeResolvedStatus=i.concat([null])):s>-1&&(e.shouldChangeResolvedStatus=i.slice(0,s).concat(i.slice(s+1)))}else e.shouldChangeResolvedStatus=a}}}),e._v("\n                "+e._s(e.resolveCheckboxText)+"\n              ")])]},proxy:!0}:null],null,!0),model:{value:e.discussionComment,callback:function(n){e.discussionComment=n},expression:"discussionComment"}})]}}])}):i("reply-placeholder",{staticClass:"qa-discussion-reply",attrs:{"placeholder-text":e.__("Reply")},on:{focus:e.showForm}})]:[i("design-note-signed-out",{attrs:{"register-path":e.registerPath,"sign-in-path":e.signInPath}})]],2)],2)],1)}),[],!1,null,null,null).exports,In=i("TJFe"),Pn=i.n(In),xn=i("KLkI"),Tn=i("cQAt"),Vn=i.n(Tn),On={components:{TodoButton:xn.a},mixins:[mn],inject:{projectPath:{default:""},issueIid:{default:""}},props:{design:{type:Object,required:!0}},data:()=>({todoLoading:!1}),computed:{designVariables(){return{fullPath:this.projectPath,iid:this.issueIid,filenames:[this.$route.params.id],atVersion:this.designsVersion}},designTodoVariables(){return{projectPath:this.projectPath,issueId:(e=this.design.issue.id,(e.match("Issue/(.+$)")||[])[1]),designId:T(this.design.id),issueIid:this.issueIid,filenames:[this.$route.params.id],atVersion:this.designsVersion};var e},pendingTodo(){var e;return null===(e=this.design.currentUserTodos)||void 0===e?void 0:e.nodes[0]},hasPendingTodo(){return Boolean(this.pendingTodo)}},methods:{createTodo(){var e=this;return this.todoLoading=!0,this.$apollo.mutate({mutation:Vn.a,variables:this.designTodoVariables,update:function(n,i){let{data:{createDesignTodo:t}}=i;const a=(t.errors||[])[0];a&&e.$emit("error",Error(a.message))}}).catch((function(n){throw e.$emit("error",Error(J)),n})).finally((function(){e.todoLoading=!1}))},deleteTodo(){var e=this;if(!this.hasPendingTodo)return Promise.reject();const{id:n}=this.pendingTodo,{designVariables:i}=this;return this.todoLoading=!0,this.$apollo.mutate({mutation:Pn.a,variables:{id:n},update(e,n){let{data:{todoMarkDone:t}}=n;const a=(t.errors||[])[0];a?this.$emit("error",Error(a)):ge(e,t,k.a,i)}}).catch((function(n){throw e.$emit("error",Error(ee)),n})).finally((function(){e.todoLoading=!1}))},toggleTodo(){return this.hasPendingTodo?this.deleteTodo():this.createTodo()}}},jn=Object(o.a)(On,(function(){var e=this,n=e.$createElement;return(e._self._c||n)("todo-button",{attrs:{"issuable-type":"design","issuable-id":e.design.iid,"is-todo":e.hasPendingTodo,loading:e.todoLoading},on:{click:function(n){return n.stopPropagation(),n.preventDefault(),e.toggleTodo(n)}}})}),[],!1,null,null,null).exports,$n={components:{DesignDiscussion:Cn,DesignNoteSignedOut:_n,Participants:tn.a,GlCollapse:en.a,GlButton:Ve.a,GlPopover:nn.a,DesignTodoButton:jn},mixins:[Object(Ee.a)()],inject:{projectPath:{default:""},issueIid:{default:""},registerPath:{default:""},signInPath:{default:""}},props:{design:{type:Object,required:!0},resolvedDiscussionsExpanded:{type:Boolean,required:!0},markdownPreviewPath:{type:String,required:!0}},data(){return{isResolvedCommentsPopoverHidden:Object(Le.G)(Object(Le.m)(this.$options.cookieKey)),discussionWithOpenForm:"",isLoggedIn:Object(Le.B)()}},computed:{discussions(){return P(this.design.discussions)},issue(){return{...this.design.issue,webPath:this.design.issue.webPath.substr(1)}},discussionParticipants(){return this.issue.participants.nodes.map((function(e){return n=e,{...n,web_url:n.webUrl,avatar_url:n.avatarUrl};var n}))},resolvedDiscussions(){return this.discussions.filter((function(e){return e.resolved}))},unresolvedDiscussions(){return this.discussions.filter((function(e){return!e.resolved}))},resolvedCommentsToggleIcon(){return this.resolvedDiscussionsExpanded?"chevron-down":"chevron-right"}},watch:{isResolvedCommentsPopoverHidden(e){e||this.$refs.resolvedComments.scrollIntoView()}},mounted(){!this.isResolvedCommentsPopoverHidden&&this.$refs.resolvedComments&&this.$refs.resolvedComments.$el.scrollIntoView()},methods:{handleSidebarClick(){this.isResolvedCommentsPopoverHidden=!0,Object(Le.Q)(this.$options.cookieKey,"true",{expires:3650}),this.updateActiveDiscussion()},updateActiveDiscussion(e){this.$apollo.mutate({mutation:Be.a,variables:{id:e,source:E}})},closeCommentForm(){this.comment="",this.$emit("closeCommentForm")},updateDiscussionWithOpenForm(e){this.discussionWithOpenForm=e}},resolveCommentsToggleText:Object(L.g)("DesignManagement|Resolved Comments"),cookieKey:"hide_design_resolved_comments_popover"},Mn=Object(o.a)($n,(function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("div",{staticClass:"image-notes gl-pt-0",on:{click:e.handleSidebarClick}},[i("div",{staticClass:"gl-py-4 gl-mb-4 gl-display-flex gl-justify-content-space-between gl-align-items-center gl-border-b-1 gl-border-b-solid gl-border-b-gray-100"},[i("span",[e._v(e._s(e.__("To Do")))]),e._v(" "),i("design-todo-button",{attrs:{design:e.design},on:{error:function(n){return e.$emit("todoError",n)}}})],1),e._v(" "),i("h2",{staticClass:"gl-font-weight-bold gl-mt-0"},[e._v("\n    "+e._s(e.issue.title)+"\n  ")]),e._v(" "),i("a",{staticClass:"gl-text-gray-400 gl-text-decoration-none gl-mb-6 gl-display-block",attrs:{href:e.issue.webUrl}},[e._v(e._s(e.issue.webPath))]),e._v(" "),i("participants",{staticClass:"gl-mb-4",attrs:{participants:e.discussionParticipants,"show-participant-label":!1}}),e._v(" "),e.isLoggedIn&&0===e.unresolvedDiscussions.length?i("h2",{staticClass:"new-discussion-disclaimer gl-font-base gl-m-0 gl-mb-4",attrs:{"data-testid":"new-discussion-disclaimer"}},[e._v("\n    "+e._s(e.s__("DesignManagement|Click the image where you'd like to start a new discussion"))+"\n  ")]):e._e(),e._v(" "),e.isLoggedIn?e._e():i("design-note-signed-out",{staticClass:"gl-mb-4",attrs:{"register-path":e.registerPath,"sign-in-path":e.signInPath,"is-add-discussion":!0}}),e._v(" "),e._l(e.unresolvedDiscussions,(function(n){return i("design-discussion",{key:n.id,attrs:{discussion:n,"design-id":e.$route.params.id,"noteable-id":e.design.id,"markdown-preview-path":e.markdownPreviewPath,"register-path":e.registerPath,"sign-in-path":e.signInPath,"resolved-discussions-expanded":e.resolvedDiscussionsExpanded,"discussion-with-open-form":e.discussionWithOpenForm,"data-testid":"unresolved-discussion"},on:{"create-note-error":function(n){return e.$emit("onDesignDiscussionError",n)},"update-note-error":function(n){return e.$emit("updateNoteError",n)},"resolve-discussion-error":function(n){return e.$emit("resolveDiscussionError",n)},"open-form":e.updateDiscussionWithOpenForm},nativeOn:{click:function(i){return i.stopPropagation(),e.updateActiveDiscussion(n.notes[0].id)}}})})),e._v(" "),e.resolvedDiscussions.length>0?[i("gl-button",{ref:"resolvedComments",staticClass:"link-inherit-color gl-text-body gl-text-decoration-none gl-font-weight-bold gl-mb-4",attrs:{id:"resolved-comments","data-testid":"resolved-comments",icon:e.resolvedCommentsToggleIcon,variant:"link"},on:{click:function(n){return e.$emit("toggleResolvedComments")}}},[e._v(e._s(e.$options.resolveCommentsToggleText)+" ("+e._s(e.resolvedDiscussions.length)+")\n    ")]),e._v(" "),e.isResolvedCommentsPopoverHidden?e._e():i("gl-popover",{attrs:{show:!e.isResolvedCommentsPopoverHidden,target:"resolved-comments",container:"popovercontainer",placement:"top",title:e.s__("DesignManagement|Resolved Comments")}},[i("p",[e._v("\n        "+e._s(e.s__('DesignManagement|Comments you resolve can be viewed and unresolved by going to the "Resolved Comments" section below'))+"\n      ")]),e._v(" "),i("a",{attrs:{href:"https://docs.gitlab.com/ee/user/project/issues/design_management.html#resolve-design-threads",rel:"noopener noreferrer",target:"_blank"}},[e._v(e._s(e.s__("DesignManagement|Learn more about resolving comments")))])]),e._v(" "),i("gl-collapse",{staticClass:"gl-mt-3",attrs:{visible:e.resolvedDiscussionsExpanded}},e._l(e.resolvedDiscussions,(function(n){return i("design-discussion",{key:n.id,attrs:{discussion:n,"design-id":e.$route.params.id,"noteable-id":e.design.id,"markdown-preview-path":e.markdownPreviewPath,"register-path":e.registerPath,"sign-in-path":e.signInPath,"resolved-discussions-expanded":e.resolvedDiscussionsExpanded,"discussion-with-open-form":e.discussionWithOpenForm,"data-testid":"resolved-discussion"},on:{error:function(n){return e.$emit("onDesignDiscussionError",n)},updateNoteError:function(n){return e.$emit("updateNoteError",n)},"open-form":e.updateDiscussionWithOpenForm},nativeOn:{click:function(i){return i.stopPropagation(),e.updateActiveDiscussion(n.notes[0].id)}}})})),1)]:e._e(),e._v(" "),e._t("reply-form")],2)}),[],!1,null,null,null).exports,qn=i("c8nH"),An=i.n(qn),Ln=i("BLrG");var Rn=i("qINL"),Un={name:"DeleteButton",components:{GlButton:Ve.a,GlModal:Oe.a},directives:{GlModalDirective:Rn.a},props:{isDeleting:{type:Boolean,required:!1,default:!1},buttonClass:{type:String,required:!1,default:""},buttonVariant:{type:String,required:!1,default:"info"},buttonCategory:{type:String,required:!1,default:"primary"},buttonIcon:{type:String,required:!1,default:void 0},buttonSize:{type:String,required:!1,default:"medium"},hasSelectedDesigns:{type:Boolean,required:!1,default:!0},loading:{type:Boolean,required:!1,default:!1}},data:()=>({modalId:l()("design-deletion-confirmation-")}),modal:{title:Object(L.g)("DesignManagement|Are you sure you want to archive the selected designs?"),actionPrimary:{text:Object(L.g)("DesignManagement|Archive designs"),attributes:{variant:"confirm","data-qa-selector":"confirm_archiving_button"}},actionCancel:{text:Object(L.a)("Cancel")}}},Bn=Object(o.a)(Un,(function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("div",[i("gl-modal",{attrs:{"modal-id":e.modalId,title:e.$options.modal.title,"action-primary":e.$options.modal.actionPrimary,"action-cancel":e.$options.modal.actionCancel},on:{ok:function(n){return e.$emit("delete-selected-designs")}}},[e._v("\n    "+e._s(e.s__("DesignManagement|Archived designs will still be available in previous versions of the design collection."))+"\n  ")]),e._v(" "),i("gl-button",{directives:[{name:"gl-modal-directive",rawName:"v-gl-modal-directive",value:e.modalId,expression:"modalId"}],class:e.buttonClass,attrs:{variant:e.buttonVariant,category:e.buttonCategory,size:e.buttonSize,loading:e.loading,icon:e.buttonIcon,disabled:e.isDeleting||!e.hasSelectedDesigns}},[e._t("default")],2)],1)}),[],!1,null,null,null).exports,zn=(i("AfGZ"),i("kyHF")),Gn=i.n(zn),Qn={mixins:[mn],apollo:{designCollection:{query:Ce.a,variables(){return{fullPath:this.projectPath,iid:this.issueIid,atVersion:this.designsVersion}},update:function(e){return{designs:Gn()(e)(["project","issue","designCollection","designs","nodes"]),copyState:Gn()(e)(["project","issue","designCollection","copyState"])}},error(){this.error=!0},result(){this.$route.query.version&&!this.hasValidVersion&&(Object(N.default)({message:Object(L.g)("DesignManagement|Requested design version does not exist. Showing latest version instead")}),this.$router.replace({name:"designs",query:{version:void 0}})),"ERROR"===this.designCollection.copyState&&Object(N.default)({message:Object(L.g)("DesignManagement|There was an error moving your designs. Please upload your designs below."),type:N.FLASH_TYPES.WARNING})}}},data:()=>({designCollection:null,error:!1}),computed:{designs(){var e;return(null===(e=this.designCollection)||void 0===e?void 0:e.designs)||[]}}},Wn={i18n:{nextButton:Object(L.g)("DesignManagement|Go to next design"),previousButton:Object(L.g)("DesignManagement|Go to previous design")},components:{GlButton:Ve.a,GlButtonGroup:Ke.a},directives:{GlTooltip:sn.a},mixins:[Qn],props:{id:{type:String,required:!0}},computed:{designsCount(){return this.designs.length},currentIndex(){var e=this;return this.designs.findIndex((function(n){return n.filename===e.id}))},paginationText(){return Object(L.h)(Object(L.g)("DesignManagement|%{current_design} of %{designs_count}"),{current_design:this.currentIndex+1,designs_count:this.designsCount})},previousDesign(){return 0===this.currentIndex?null:this.designs[this.currentIndex-1]},nextDesign(){return this.currentIndex+1===this.designsCount?null:this.designs[this.currentIndex+1]}},mounted(){var e=this;Mousetrap.bind(Object(_e.pb)(_e.L),(function(){return e.navigateToDesign(e.previousDesign)})),Mousetrap.bind(Object(_e.pb)(_e.K),(function(){return e.navigateToDesign(e.nextDesign)}))},beforeDestroy(){Mousetrap.unbind(Object(_e.pb)(_e.L)),Mousetrap.unbind(Object(_e.pb)(_e.K))},methods:{navigateToDesign(e){e&&this.$router.push({name:"design",params:{id:e.filename},query:this.$route.query})}}},Hn=Object(o.a)(Wn,(function(){var e=this,n=e.$createElement,i=e._self._c||n;return e.designsCount?i("div",{staticClass:"gl-display-flex gl-align-items-center"},[e._v("\n  "+e._s(e.paginationText)+"\n  "),i("gl-button-group",{staticClass:"gl-mx-5"},[i("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.bottom",modifiers:{bottom:!0}}],staticClass:"js-previous-design",attrs:{disabled:!e.previousDesign,title:e.$options.i18n.previousButton,"aria-label":e.$options.i18n.previousButton,icon:"angle-left"},on:{click:function(n){return e.navigateToDesign(e.previousDesign)}}}),e._v(" "),i("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.bottom",modifiers:{bottom:!0}}],staticClass:"js-next-design",attrs:{disabled:!e.nextDesign,title:e.$options.i18n.nextButton,"aria-label":e.$options.i18n.nextButton,icon:"angle-right"},on:{click:function(n){return e.navigateToDesign(e.nextDesign)}}})],1)],1):e._e()}),[],!1,null,null,null).exports,Yn={i18n:{downloadButtonLabel:Object(L.g)("DesignManagement|Download design")},components:{GlButton:Ve.a,GlIcon:Qe.a,DesignNavigation:Hn,DeleteButton:Bn},directives:{GlTooltip:sn.a},mixins:[Ln.a],inject:{projectPath:{default:""},issueIid:{default:""}},props:{id:{type:String,required:!0},isDeleting:{type:Boolean,required:!0},filename:{type:String,required:!1,default:""},updatedAt:{type:String,required:!1,default:null},updatedBy:{type:Object,required:!1,default:function(){return{}}},isLatestVersion:{type:Boolean,required:!0},image:{type:String,required:!0}},data:()=>({permissions:{createDesign:!1}}),apollo:{permissions:{query:An.a,variables(){return{fullPath:this.projectPath,iid:this.issueIid}},update:function(e){return e.project.issue.userPermissions}}},computed:{updatedText(){return Object(L.h)(Object(L.a)("Updated %{updated_at} by %{updated_by}"),{updated_at:this.timeFormatted(this.updatedAt),updated_by:this.updatedBy.name})},canDeleteDesign(){return this.permissions.createDesign}},DESIGNS_ROUTE_NAME:"designs"},Xn=Object(o.a)(Yn,(function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("header",{staticClass:"gl-display-flex gl-align-items-center gl-justify-content-space-between gl-bg-white gl-py-4 gl-pl-4 js-design-header"},[i("div",{staticClass:"gl-display-flex gl-align-items-center"},[i("router-link",{staticClass:"gl-mr-5 gl-display-flex gl-align-items-center gl-justify-content-center text-plain",attrs:{to:{name:e.$options.DESIGNS_ROUTE_NAME,query:e.$route.query},"aria-label":e.s__("DesignManagement|Go back to designs"),"data-testid":"close-design"}},[i("gl-icon",{attrs:{name:"close"}})],1),e._v(" "),i("div",{staticClass:"gl-overflow-hidden gl-display-flex gl-align-items-center"},[i("h2",{staticClass:"gl-m-0 str-truncated-100 gl-font-base"},[e._v(e._s(e.filename))]),e._v(" "),e.updatedAt?i("small",{staticClass:"gl-text-gray-500"},[e._v(e._s(e.updatedText))]):e._e()])],1),e._v(" "),i("design-navigation",{staticClass:"gl-ml-auto gl-flex-shrink-0",attrs:{id:e.id}}),e._v(" "),i("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.bottom",modifiers:{bottom:!0}}],attrs:{href:e.image,icon:"download",title:e.$options.i18n.downloadButtonLabel,"aria-label":e.$options.i18n.downloadButtonLabel}}),e._v(" "),e.isLatestVersion&&e.canDeleteDesign?i("delete-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.bottom",modifiers:{bottom:!0}}],staticClass:"gl-ml-3",attrs:{"is-deleting":e.isDeleting,"button-variant":"default","button-icon":"archive","button-category":"secondary",title:e.s__("DesignManagement|Archive design")},on:{"delete-selected-designs":function(n){return e.$emit("delete")}}}):e._e()],1)}),[],!1,null,null,null).exports,Kn=i("TSga"),Jn=i.n(Kn),Zn=i("r8SC"),ei=i.n(Zn),ni=i("htOw"),ii=i("mWeI");const ti={VIEW_DESIGN_SCHEMA:"iglu:com.gitlab/design_management_context/jsonschema/1-0-0"},ai="projects:issues:design",si={VIEW_DESIGN:"view_design",CREATE_DESIGN:"create_design",UPDATE_DESIGN:"update_design"},oi={DESIGN_ACTION:"design_action"};var ri={components:{ApolloMutation:m.ApolloMutation,DesignReplyForm:Me,DesignPresentation:Xe,DesignScaler:Ze,DesignDestroyer:Te,Toolbar:Xn,GlLoadingIcon:De.a,GlAlert:be.a,DesignSidebar:Mn},mixins:[mn,Object(Ee.a)()],beforeRouteUpdate(e,n,i){this.scale=1,i()},beforeRouteEnter(e,n,i){const t=q();t&&t.classList.add(...C),i()},beforeRouteLeave(e,n,i){const t=q();t&&t.classList.remove(...C),i()},props:{id:{type:String,required:!0}},data:()=>({design:{},comment:"",annotationCoordinates:null,errorMessage:"",scale:1,resolvedDiscussionsExpanded:!1,prevCurrentUserTodos:null,maxScale:2}),apollo:{design:{query:k.a,fetchPolicy:g.fetchPolicies.CACHE_AND_NETWORK,variables(){return this.designVariables},update:function(e){return O(e)},result(e){this.onDesignQueryResult(e)},error(){this.onQueryError(W)}}},computed:{isFirstLoading(){return this.$apollo.queries.design.loading&&!this.design.filename},discussions(){return this.design.discussions?P(this.design.discussions):[]},markdownPreviewPath(){return`/${this.projectPath}/preview_markdown?target_type=Issue`},isSubmitButtonDisabled(){return 0===this.comment.trim().length},designVariables(){return{fullPath:this.projectPath,iid:this.issueIid,filenames:[this.$route.params.id],atVersion:this.designsVersion}},mutationPayload(){const{x:e,y:n,width:i,height:t}=this.annotationCoordinates;return{noteableId:this.design.id,body:this.comment,position:{headSha:this.design.diffRefs.headSha,baseSha:this.design.diffRefs.baseSha,startSha:this.design.diffRefs.startSha,x:e,y:n,width:i,height:t,paths:{newPath:this.design.fullPath}}}},isAnnotating(){return Boolean(this.annotationCoordinates)},resolvedDiscussions(){return this.discussions.filter((function(e){return e.resolved}))},currentUserTodos(){var e,n;return this.design&&this.design.currentUserTodos?null===(e=this.design.currentUserTodos)||void 0===e?void 0:null===(n=e.nodes)||void 0===n?void 0:n.length:null}},watch:{resolvedDiscussions(e){e.length||(this.resolvedDiscussionsExpanded=!1)},currentUserTodos(e,n){this.prevCurrentUserTodos=n}},mounted(){Ne.a.bind(Object(_e.pb)(_e.H),this.closeDesign),this.trackPageViewEvent(),this.updateActiveDiscussionFromUrl()},beforeDestroy(){Ne.a.unbind(Object(_e.pb)(_e.H))},methods:{addImageDiffNoteToStore(e,n){let{data:{createImageDiffNote:i}}=n;le(e,i,k.a,this.designVariables)},updateImageDiffNoteInStore(e,n){let{data:{repositionImageDiffNote:i}}=n;return ue(e,i,k.a,this.designVariables)},onMoveNote(e){var n=this;let{noteId:i,discussionId:t,position:a}=e;const s=this.discussions.find((function(e){let{id:n}=e;return n===t})).notes.find((function(e){let{discussion:n}=e;return n.id===t})),o={optimisticResponse:M(s,{position:a}),variables:{input:{id:i,position:a}},mutation:ei.a,update:this.updateImageDiffNoteInStore};return this.$apollo.mutate(o).catch((function(e){return n.onUpdateImageDiffNoteError(e)}))},onDesignQueryResult(e){let{data:n,loading:i}=e;i||(n&&O(n)?this.$route.query.version&&!this.hasValidVersion&&this.onQueryError(H):this.onQueryError(W))},onQueryError(e){Object(N.default)({message:e}),this.$router.push({name:this.$options.DESIGNS_ROUTE_NAME})},onError(e,n){if(this.errorMessage=e,n)throw n},onCreateImageDiffNoteError(e){this.onError(U,e)},onUpdateNoteError(e){this.onError(z,e)},onDesignDiscussionError(e){this.onError(R,e)},onUpdateImageDiffNoteError(e){this.onError(B,e)},onDesignDeleteError(e){this.onError(te(),e)},onResolveDiscussionError(e){this.onError(B,e)},onTodoError(e){this.onError((null==e?void 0:e.message)||ne,e)},openCommentForm(e){this.annotationCoordinates=e,this.$refs.newDiscussionForm&&this.$refs.newDiscussionForm.focusInput()},closeCommentForm(e){this.comment="",this.annotationCoordinates=null,null!=e&&e.data&&!ye()(this.prevCurrentUserTodos)&&(Object(we.b)(this.currentUserTodos-this.prevCurrentUserTodos),this.prevCurrentUserTodos=this.currentUserTodos)},closeDesign(){this.$router.push({name:this.$options.DESIGNS_ROUTE_NAME,query:this.$route.query})},trackPageViewEvent(){!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,t=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=si.VIEW_DESIGN;ii.a.event(ai,a,{label:a,context:{schema:ti.VIEW_DESIGN_SCHEMA,data:{"design-version-number":i,"design-is-current-version":t,"internal-object-referrer":e,"design-collection-owner":n}}})}("issue-design-collection","issue",this.$route.query.version||this.latestVersionId,this.isLatestVersion),ni.b.trackRedisHllUserEvent(oi.DESIGN_ACTION)},updateActiveDiscussion(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E;this.$apollo.mutate({mutation:Be.a,variables:{id:e,source:n}})},updateActiveDiscussionFromUrl(){const e=j(this.$route.hash),n=e?function(e){return`gid://gitlab/DiffNote/${e}`}(e):void 0;return this.updateActiveDiscussion(n,F)},toggleResolvedComments(){this.resolvedDiscussionsExpanded=!this.resolvedDiscussionsExpanded},setMaxScale(e){this.maxScale=1/e}},createImageDiffNoteMutation:Jn.a,DESIGNS_ROUTE_NAME:"designs"},di=Object(o.a)(ri,(function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("div",{staticClass:"design-detail js-design-detail fixed-top gl-w-full gl-bottom-0 gl-display-flex gl-justify-content-center gl-flex-direction-column gl-lg-flex-direction-row"},[e.isFirstLoading?i("gl-loading-icon",{staticClass:"gl-align-self-center",attrs:{size:"xl"}}):[i("div",{staticClass:"gl-display-flex gl-overflow-hidden gl-flex-grow-1 gl-flex-direction-column gl-relative"},[i("design-destroyer",{attrs:{filenames:[e.design.filename],"project-path":e.projectPath,iid:e.issueIid},on:{done:function(n){return e.$router.push({name:e.$options.DESIGNS_ROUTE_NAME})},error:e.onDesignDeleteError},scopedSlots:e._u([{key:"default",fn:function(n){var t=n.mutate,a=n.loading;return[i("toolbar",e._b({attrs:{id:e.id,"is-deleting":a,"is-latest-version":e.isLatestVersion},on:{delete:t}},"toolbar",e.design,!1))]}}])}),e._v(" "),e.errorMessage?i("div",{staticClass:"gl-p-5"},[i("gl-alert",{attrs:{variant:"danger"},on:{dismiss:function(n){e.errorMessage=null}}},[e._v("\n          "+e._s(e.errorMessage)+"\n        ")])],1):e._e(),e._v(" "),i("design-presentation",{attrs:{image:e.design.image,"image-name":e.design.filename,discussions:e.discussions,"is-annotating":e.isAnnotating,scale:e.scale,"resolved-discussions-expanded":e.resolvedDiscussionsExpanded},on:{openCommentForm:e.openCommentForm,closeCommentForm:e.closeCommentForm,moveNote:e.onMoveNote,setMaxScale:e.setMaxScale}}),e._v(" "),i("div",{staticClass:"design-scaler-wrapper gl-absolute gl-mb-6 gl-display-flex gl-justify-content-center gl-align-items-center"},[i("design-scaler",{attrs:{"max-scale":e.maxScale},on:{scale:function(n){e.scale=n}}})],1)],1),e._v(" "),i("design-sidebar",{attrs:{design:e.design,"resolved-discussions-expanded":e.resolvedDiscussionsExpanded,"markdown-preview-path":e.markdownPreviewPath},on:{onDesignDiscussionError:e.onDesignDiscussionError,onCreateImageDiffNoteError:e.onCreateImageDiffNoteError,updateNoteError:e.onUpdateNoteError,resolveDiscussionError:e.onResolveDiscussionError,toggleResolvedComments:e.toggleResolvedComments,todoError:e.onTodoError},scopedSlots:e._u([{key:"reply-form",fn:function(){return[e.isAnnotating?i("apollo-mutation",{attrs:{mutation:e.$options.createImageDiffNoteMutation,variables:{input:e.mutationPayload},update:e.addImageDiffNoteToStore},on:{done:e.closeCommentForm,error:e.onCreateImageDiffNoteError},scopedSlots:e._u([{key:"default",fn:function(n){var t=n.mutate,a=n.loading;return[i("design-reply-form",{ref:"newDiscussionForm",attrs:{"is-saving":a,"markdown-preview-path":e.markdownPreviewPath},on:{"submit-form":t,"cancel-form":e.closeCommentForm},model:{value:e.comment,callback:function(n){e.comment=n},expression:"comment"}})]}}],null,!1,1137158228)}):e._e()]},proxy:!0}])})]],2)}),[],!1,null,null,null).exports,li=i("p1d2"),ui=i.n(li),ci=i("TOl7"),mi=i("iAc6"),gi=i("JBkr"),fi={components:{GlLoadingIcon:De.a,GlIntersectionObserver:gi.a,GlIcon:Qe.a,Timeago:rn.a},directives:{GlTooltip:sn.a},props:{id:{type:[Number,String],required:!0},event:{type:String,required:!0},notesCount:{type:Number,required:!0},image:{type:String,required:!0},filename:{type:String,required:!0},updatedAt:{type:String,required:!1,default:null},isUploading:{type:Boolean,required:!1,default:!0},imageV432x230:{type:String,required:!1,default:null}},data:()=>({imageLoading:!0,imageError:!1,wasInView:!1}),computed:{icon(){const e=this.event.toLowerCase(),n={creation:{name:"file-addition-solid",classes:"text-success-500",tooltip:Object(L.a)("Added in this version")},modification:{name:"file-modified-solid",classes:"text-primary-500",tooltip:Object(L.a)("Modified in this version")},deletion:{name:"file-deletion-solid",classes:"text-danger-500",tooltip:Object(L.a)("Archived in this version")}};return n[e]?n[e]:{}},notesLabel(){return Object(L.f)("%d comment","%d comments",this.notesCount)},imageLink(){return this.wasInView?this.imageV432x230||this.image:""},showLoadingSpinner(){return this.imageLoading||this.isUploading},showImageErrorIcon(){return this.wasInView&&this.imageError},showImage(){return!this.showLoadingSpinner&&!this.showImageErrorIcon}},methods:{onImageLoad(){this.imageLoading=!1,this.imageError=!1},onImageError(){this.imageLoading=!1,this.imageError=!0},onAppear(){this.wasInView||(this.wasInView=!0,this.imageLoading=!0)}},DESIGN_ROUTE_NAME:"design"},vi=Object(o.a)(fi,(function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("router-link",{staticClass:"card gl-cursor-pointer text-plain js-design-list-item design-list-item design-list-item-new",attrs:{to:{name:e.$options.DESIGN_ROUTE_NAME,params:{id:e.filename},query:e.$route.query}}},[i("div",{staticClass:"card-body gl-p-0 gl-display-flex gl-align-items-center gl-justify-content-center gl-overflow-hidden gl-relative"},[e.icon.name?i("div",{staticClass:"gl-top-5 gl-right-5 gl-absolute",attrs:{"data-testid":"design-event"}},[i("span",{attrs:{title:e.icon.tooltip,"aria-label":e.icon.tooltip}},[i("gl-icon",{class:e.icon.classes,attrs:{name:e.icon.name,size:16,"data-qa-selector":"design_status_icon","data-qa-status":e.icon.name}})],1)]):e._e(),e._v(" "),i("gl-intersection-observer",{on:{appear:e.onAppear}},[e.showLoadingSpinner?i("gl-loading-icon",{attrs:{size:"lg"}}):e.showImageErrorIcon?i("gl-icon",{staticClass:"text-secondary",attrs:{name:"media-broken",size:32}}):e._e(),e._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:e.showImage,expression:"showImage"}],staticClass:"gl-display-block gl-mx-auto gl-max-w-full gl-max-h-full design-img",attrs:{src:e.imageLink,alt:e.filename,"data-qa-selector":"design_image","data-qa-filename":e.filename,"data-testid":"design-img-"+e.id},on:{load:e.onImageLoad,error:e.onImageError}})],1)],1),e._v(" "),i("div",{staticClass:"card-footer gl-display-flex gl-w-full"},[i("div",{staticClass:"gl-display-flex gl-flex-direction-column str-truncated-100"},[i("span",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],staticClass:"gl-font-weight-bold str-truncated-100",attrs:{"data-qa-selector":"design_file_name","data-testid":"design-img-filename-"+e.id,title:e.filename}},[e._v(e._s(e.filename))]),e._v(" "),e.updatedAt?i("span",{staticClass:"str-truncated-100"},[e._v("\n        "+e._s(e.__("Updated"))+" "),i("timeago",{attrs:{time:e.updatedAt,"tooltip-placement":"bottom"}})],1):e._e()]),e._v(" "),e.notesCount?i("div",{staticClass:"gl-ml-auto gl-display-flex gl-align-items-center gl-text-gray-500"},[i("gl-icon",{staticClass:"gl-ml-2",attrs:{name:"comments"}}),e._v(" "),i("span",{staticClass:"gl-ml-2",attrs:{"aria-label":e.notesLabel}},[e._v("\n        "+e._s(e.notesCount)+"\n      ")])],1):e._e()])])}),[],!1,null,null,null).exports,pi={components:{GlButton:Ve.a},directives:{GlTooltip:sn.a},props:{isSaving:{type:Boolean,required:!0}},methods:{openFileUpload(){this.$refs.fileUpload.click()},onFileUploadChange(e){this.$emit("upload",e.target.files)}},VALID_DESIGN_FILE_MIMETYPE:_},hi=Object(o.a)(pi,(function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("div",[i("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:e.s__("DesignManagement|Adding a design with the same filename replaces the file in a new version."),disabled:e.isSaving,loading:e.isSaving,category:"secondary",variant:"confirm",size:"small"},on:{click:e.openFileUpload}},[e._v("\n    "+e._s(e.s__("DesignManagement|Upload designs"))+"\n  ")]),e._v(" "),i("input",{ref:"fileUpload",staticClass:"gl-display-none",attrs:{type:"file",name:"design_file",accept:e.$options.VALID_DESIGN_FILE_MIMETYPE.mimetype,multiple:""},on:{change:e.onFileUploadChange}})],1)}),[],!1,null,null,null).exports,ki=i("OkMp"),yi=i("0X+3"),Di=i("t2gO"),bi={components:{GlDropdown:ki.a,GlDropdownItem:yi.a,GlSprintf:Sn.a,TimeAgo:rn.a},mixins:[mn],computed:{queryVersion(){return this.$route.query.version},currentVersionIdx(){var e=this;if(!this.queryVersion)return 0;const n=this.allVersions.findIndex((function(n){return e.findVersionId(n.id)===e.queryVersion}));return-1!==n?n:0},currentVersionId(){if(this.queryVersion)return this.queryVersion;const e=this.allVersions[this.currentVersionIdx];return this.findVersionId(e.id)},dropdownText(){if(this.isLatestVersion)return Object(L.a)("Showing latest version");const e=this.allVersions.length-this.currentVersionIdx;return Object(L.h)(Object(L.a)("Showing version #%{versionNumber}"),{versionNumber:e})}},methods:{findVersionId:x,routeToVersion(e){this.$router.push({path:this.$route.path,query:{version:this.findVersionId(e)}})},versionText(e){return this.findVersionId(e)===this.latestVersionId?Object(L.a)("Version %{versionNumber} (latest)"):Object(L.a)("Version %{versionNumber}")},getAvatarUrl(e){var n;return(null==e?void 0:null===(n=e.author)||void 0===n?void 0:n.avatarUrl)||Di.a}}},Si=Object(o.a)(bi,(function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("gl-dropdown",{attrs:{text:e.dropdownText,size:"small"}},e._l(e.allVersions,(function(n,t){return i("gl-dropdown-item",{key:n.id,attrs:{"is-check-item":!0,"is-check-centered":!0,"is-checked":e.findVersionId(n.id)===e.currentVersionId,"avatar-url":e.getAvatarUrl(n)},on:{click:function(i){return e.routeToVersion(n.id)}}},[i("strong",[i("gl-sprintf",{attrs:{message:e.versionText(n.id)},scopedSlots:e._u([{key:"versionNumber",fn:function(){return[e._v("\n          "+e._s(e.allVersions.length-t)+"\n        ")]},proxy:!0}],null,!0)})],1),e._v(" "),n.author?i("div",{staticClass:"gl-text-gray-600 gl-mt-1"},[i("div",[e._v(e._s(n.author.name))]),e._v(" "),n.createdAt?i("time-ago",{staticClass:"text-1",attrs:{time:n.createdAt,"tooltip-placement":"bottom"}}):e._e()],1):e._e()])})),1)}),[],!1,null,null,null).exports,Ni=i("WdoQ"),_i=i.n(Ni),wi=i("azGG"),Ei=i.n(wi);var Fi={components:{GlLoadingIcon:De.a,GlAlert:be.a,GlButton:Ve.a,GlSprintf:Sn.a,GlLink:an.a,UploadButton:hi,Design:vi,DesignDestroyer:Te,DesignVersionDropdown:Si,DeleteButton:Bn,DesignDropzone:mi.a,VueDraggable:ui.a},dropzoneProps:{dropToStartMessage:Object(L.a)("Drop your designs to start your upload."),isFileValid:I,validFileMimetypes:[_.mimetype]},mixins:[Qn],apollo:{permissions:{query:An.a,variables(){return{fullPath:this.projectPath,iid:this.issueIid}},update:function(e){return e.project.issue.userPermissions}}},beforeRouteUpdate(e,n,i){this.selectedDesigns=[],i()},data:()=>({permissions:{createDesign:!1},filesToBeSaved:[],selectedDesigns:[],isDraggingDesign:!1,reorderedDesigns:null,isReorderingInProgress:!1}),computed:{isLoading(){return this.$apollo.queries.designCollection.loading||this.$apollo.queries.permissions.loading},isSaving(){return this.filesToBeSaved.length>0},canCreateDesign(){return this.permissions.createDesign},showToolbar(){return this.canCreateDesign&&this.allVersions.length>0},hasDesigns(){return this.designs.length>0},hasSelectedDesigns(){return this.selectedDesigns.length>0},canDeleteDesigns(){return this.isLatestVersion&&this.hasSelectedDesigns},projectQueryBody(){return{query:Ce.a,variables:{fullPath:this.projectPath,iid:this.issueIid,atVersion:null}}},selectAllButtonText(){return this.hasSelectedDesigns?Object(L.g)("DesignManagement|Deselect all"):Object(L.g)("DesignManagement|Select all")},isDesignListEmpty(){return!this.isSaving&&!this.hasDesigns},isDesignCollectionCopying(){return this.designCollection&&"IN_PROGRESS"===this.designCollection.copyState},designDropzoneWrapperClass(){return this.isDesignListEmpty?"col-12":"gl-flex-direction-column col-md-6 col-lg-3 gl-mb-3"}},mounted(){"/designs"===this.$route.path&&this.$el.scrollIntoView()},beforeDestroy(){document.removeEventListener("paste",this.onDesignPaste)},methods:{resetFilesToBeSaved(){this.filesToBeSaved=[]},isValidDesignUpload(e){return!!this.canCreateDesign&&(!(e.length>10)||(Object(N.default)({message:Object(L.h)(Object(L.g)("DesignManagement|The maximum number of designs allowed to be uploaded is %{upload_limit}. Please try again."),{upload_limit:10})}),!1))},onUploadDesign(e){var n=this;if(this.filesToBeSaved=Array.from(e),!this.isValidDesignUpload(this.filesToBeSaved))return null;const i={optimisticResponse:$(this.filesToBeSaved),variables:{files:this.filesToBeSaved,projectPath:this.projectPath,iid:this.issueIid},context:{hasUpload:!0},mutation:Ei.a,update:this.afterUploadDesign};return this.$apollo.mutate(i).then((function(e){return n.onUploadDesignDone(e)})).catch((function(){return n.onUploadDesignError()}))},afterUploadDesign(e,n){let{data:{designManagementUpload:i}}=n;ce(e,i,this.projectQueryBody)},onUploadDesignDone(e){var n,i;const t=(null==e?void 0:null===(n=e.data)||void 0===n?void 0:null===(i=n.designManagementUpload)||void 0===i?void 0:i.skippedDesigns)||[],a=ae(this.filesToBeSaved,t);a&&Object(N.default)({message:a,types:N.FLASH_TYPES.WARNING}),this.isLatestVersion||this.$router.push({name:"designs"}),this.resetFilesToBeSaved(),this.trackUploadDesign(e)},trackUploadDesign(e){var n,i;((null==e?void 0:null===(n=e.data)||void 0===n?void 0:null===(i=n.designManagementUpload)||void 0===i?void 0:i.designs)||[]).forEach((function(e){"CREATION"===e.event?ii.a.event(ai,si.CREATE_DESIGN):"MODIFICATION"===e.event&&ii.a.event(ai,si.UPDATE_DESIGN)}))},onUploadDesignError(){this.resetFilesToBeSaved(),Object(N.default)({message:G})},changeSelectedDesigns(e){this.isDesignSelected(e)?this.selectedDesigns=this.selectedDesigns.filter((function(n){return n!==e})):this.selectedDesigns.push(e)},toggleDesignsSelection(){this.hasSelectedDesigns?this.selectedDesigns=[]:this.selectedDesigns=this.designs.map((function(e){return e.filename}))},isDesignSelected(e){return this.selectedDesigns.includes(e)},isDesignToBeSaved(e){return this.filesToBeSaved.some((function(n){return n.name===e}))},canSelectDesign(e){return this.isLatestVersion&&this.canCreateDesign&&!this.isDesignToBeSaved(e)},onDesignDelete(){this.selectedDesigns=[],this.$route.query.version&&this.$router.push({name:"designs"})},onDesignDeleteError(){const e=te(this.selectedDesigns.length);Object(N.default)({message:e})},onDesignDropzoneError(){Object(N.default)({message:Q})},onExistingDesignDropzoneChange(e,n){const i=Array.from(e);i.length>1?Object(N.default)({message:Y}):i.some((function(e){let{name:i}=e;return n===i}))?this.onUploadDesign(e):Object(N.default)({message:X})},onDesignPaste(e){var n=this;const{clipboardData:i}=e,t=Array.from(i.files);if(i&&t.length>0){if(!t.some(I))return;e.preventDefault(),[...t].forEach((function(e){let i=Object(ci.b)(e);(i=Object(ci.c)(e))&&"image.png"!==i||(i=`design_${Date.now()}.png`);const t=new File([e],i);n.onUploadDesign([t])}))}},toggleOnPasteListener(){document.addEventListener("paste",this.onDesignPaste)},toggleOffPasteListener(){document.removeEventListener("paste",this.onDesignPaste)},designMoveVariables(e,n){const i={id:n.id};return e>0&&(i.previous=this.reorderedDesigns[e-1].id),e<this.reorderedDesigns.length-1&&(i.next=this.reorderedDesigns[e+1].id),i},reorderDesigns(e){var n=this;let{moved:{newIndex:i,element:t}}=e;var a;this.isReorderingInProgress=!0,this.$apollo.mutate({mutation:_i.a,variables:this.designMoveVariables(i,t),update:function(e,i){let{data:{designManagementMove:t}}=i;return me(e,t,n.projectQueryBody)},optimisticResponse:(a=this.reorderedDesigns,{__typename:"Mutation",designManagementMove:{__typename:"DesignManagementMovePayload",designCollection:{__typename:"DesignCollection",designs:{__typename:"DesignConnection",nodes:a}},errors:[]}})}).catch((function(){Object(N.default)({message:K})})).finally((function(){n.isReorderingInProgress=!1}))},onDesignMove(e){this.reorderedDesigns=e}},dragOptions:{animation:200,ghostClass:"gl-visibility-hidden"},i18n:{dropzoneDescriptionText:Object(L.a)("Drag your designs here or %{linkStart}click to upload%{linkEnd}.")}},Ci=[{name:"designs",path:"/",component:Object(o.a)(Fi,(function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("div",{staticClass:"gl-mt-5",attrs:{"data-testid":"designs-root"},on:{mouseenter:e.toggleOnPasteListener,mouseleave:e.toggleOffPasteListener}},[e.showToolbar?i("header",{staticClass:"gl-display-flex gl-my-0 gl-text-gray-900",attrs:{"data-testid":"design-toolbar-wrapper"}},[i("div",{staticClass:"gl-display-flex gl-justify-content-space-between gl-align-items-center gl-w-full gl-flex-wrap"},[i("div",{staticClass:"gl-display-flex gl-align-items-center gl-my-2"},[i("span",{staticClass:"gl-font-weight-bold gl-mr-3"},[e._v(e._s(e.s__("DesignManagement|Designs")))]),e._v(" "),i("design-version-dropdown")],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.hasDesigns,expression:"hasDesigns"}],staticClass:"qa-selector-toolbar gl-display-flex gl-align-items-center gl-my-2"},[e.isLatestVersion?i("gl-button",{staticClass:"gl-mr-3",attrs:{variant:"link",size:"small","data-testid":"select-all-designs-button"},on:{click:e.toggleDesignsSelection}},[e._v(e._s(e.selectAllButtonText)+"\n        ")]):e._e(),e._v(" "),i("design-destroyer",{attrs:{filenames:e.selectedDesigns},on:{done:e.onDesignDelete,error:e.onDesignDeleteError},scopedSlots:e._u([{key:"default",fn:function(n){var t=n.mutate,a=n.loading;return[e.isLatestVersion?i("delete-button",{attrs:{"is-deleting":a,"button-variant":"default","button-class":"gl-mr-3","button-size":"small","data-qa-selector":"archive_button",loading:a,"has-selected-designs":e.hasSelectedDesigns},on:{"delete-selected-designs":function(e){return t()}}},[e._v("\n            "+e._s(e.s__("DesignManagement|Archive selected"))+"\n          ")]):e._e()]}}],null,!1,3285418233)}),e._v(" "),e.canCreateDesign?i("upload-button",{attrs:{"is-saving":e.isSaving,"data-testid":"design-upload-button"},on:{upload:e.onUploadDesign}}):e._e()],1)])]):e._e(),e._v(" "),i("div",{staticClass:"gl-mt-6"},[e.isLoading?i("gl-loading-icon",{attrs:{size:"lg"}}):e.error?i("gl-alert",{attrs:{variant:"danger",dismissible:!1}},[e._v("\n      "+e._s(e.__("An error occurred while loading designs. Please try again."))+"\n    ")]):e.isDesignCollectionCopying?i("header",{staticClass:"card",attrs:{"data-testid":"design-collection-is-copying"}},[i("div",{staticClass:"card-header design-card-header gl-border-b-0"},[i("div",{staticClass:"card-title gl-display-flex gl-align-items-center gl-my-0 gl-h-7"},[e._v("\n          "+e._s(e.s__("DesignManagement|Your designs are being copied and are on their way Please refresh to update."))+"\n        ")])])]):i("vue-draggable",e._b({staticClass:"list-unstyled row",attrs:{value:e.designs,disabled:!e.isLatestVersion||e.isReorderingInProgress,tag:"ol",draggable:".js-design-tile"},on:{start:function(n){e.isDraggingDesign=!0},end:function(n){e.isDraggingDesign=!1},change:e.reorderDesigns,input:e.onDesignMove},scopedSlots:e._u([{key:"header",fn:function(){return[i("li",{class:e.designDropzoneWrapperClass,attrs:{"data-testid":"design-dropzone-wrapper"}},[i("design-dropzone",e._b({class:{"design-list-item design-list-item-new":!e.isDesignListEmpty},attrs:{"enable-drag-behavior":e.isDraggingDesign,"display-as-card":e.hasDesigns,"data-qa-selector":"design_dropzone_content"},on:{change:e.onUploadDesign,error:e.onDesignDropzoneError},scopedSlots:e._u([{key:"upload-text",fn:function(n){var t=n.openFileUpload;return[i("gl-sprintf",{attrs:{message:e.$options.i18n.dropzoneDescriptionText},scopedSlots:e._u([{key:"link",fn:function(n){var a=n.content;return[i("gl-link",{on:{click:function(e){return e.stopPropagation(),t(e)}}},[e._v(e._s(a))])]}}],null,!0)})]}}])},"design-dropzone",e.$options.dropzoneProps,!1))],1)]},proxy:!0}])},"vue-draggable",e.$options.dragOptions,!1),e._l(e.designs,(function(n){return i("li",{key:n.id,staticClass:"col-md-6 col-lg-3 gl-mb-3 gl-bg-transparent gl-shadow-none js-design-tile"},[i("design-dropzone",e._b({attrs:{"display-as-card":e.hasDesigns,"enable-drag-behavior":e.isDraggingDesign},on:{change:function(i){return e.onExistingDesignDropzoneChange(i,n.filename)},error:e.onDesignDropzoneError},scopedSlots:e._u([{key:"upload-text",fn:function(n){var t=n.openFileUpload;return[i("gl-sprintf",{attrs:{message:e.$options.i18n.dropzoneDescriptionText},scopedSlots:e._u([{key:"link",fn:function(n){var a=n.content;return[i("gl-link",{on:{click:function(e){return e.stopPropagation(),t(e)}}},[e._v("\n                  "+e._s(a)+"\n                ")])]}}],null,!0)})]}}],null,!0)},"design-dropzone",e.$options.dropzoneProps,!1),[i("design",e._b({staticClass:"gl-bg-white",attrs:{"is-uploading":e.isDesignToBeSaved(n.filename)}},"design",n,!1))],1),e._v(" "),e.canSelectDesign(n.filename)?i("input",{staticClass:"design-checkbox",attrs:{type:"checkbox","data-qa-selector":"design_checkbox","data-qa-design":n.filename},domProps:{checked:e.isDesignSelected(n.filename)},on:{change:function(i){return e.changeSelectedDesigns(n.filename)}}}):e._e()],1)})),0)],1),e._v(" "),i("router-view",{key:e.$route.fullPath})],1)}),[],!1,null,null,null).exports,alias:"/designs"},{name:"design",path:"/designs/:id",component:di,beforeEnter(e,n,i){let{params:{id:t}}=e;"string"==typeof t&&i()},props:function(e){let{params:{id:n}}=e;return{id:n}}}];t.default.use(he.a);n.default=function(){const e=document.querySelector(".js-design-management"),{issueIid:n,projectPath:i,issuePath:o,registerPath:d,signInPath:l}=e.dataset,u=(c=o,new he.a({base:c,mode:"history",routes:Ci}));var c;return pe.clients.defaultClient.cache.writeQuery({query:p.a,data:{activeDiscussion:{__typename:"ActiveDiscussion",id:null,source:null}}}),new t.default({el:e,name:"DesignRoot",router:u,apolloProvider:pe,provide:{projectPath:i,issueIid:n,registerPath:d,signInPath:l},mounted(){Object(s.a)({mark:a.b,measures:[{name:a.c}]})},render:e=>e(r)})}},WdoQ:function(e,n,i){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DesignManagementMove"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"DesignManagementDesignID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"previous"}},type:{kind:"NamedType",name:{kind:"Name",value:"DesignManagementDesignID"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"next"}},type:{kind:"NamedType",name:{kind:"Name",value:"DesignManagementDesignID"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"designManagementMove"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"ObjectField",name:{kind:"Name",value:"previous"},value:{kind:"Variable",name:{kind:"Name",value:"previous"}}},{kind:"ObjectField",name:{kind:"Name",value:"next"},value:{kind:"Variable",name:{kind:"Name",value:"next"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"designCollection"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"designs"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"DesignListItem"},directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"errors"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:396}};t.loc.source={body:'#import "../fragments/design_list.fragment.graphql"\n\nmutation DesignManagementMove(\n  $id: DesignManagementDesignID!\n  $previous: DesignManagementDesignID\n  $next: DesignManagementDesignID\n) {\n  designManagementMove(input: { id: $id, previous: $previous, next: $next }) {\n    designCollection {\n      designs {\n        nodes {\n          ...DesignListItem\n        }\n      }\n    }\n    errors\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};t.definitions=t.definitions.concat(i("Bki7").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!a[n]&&(a[n]=!0,!0)})));var s={};function o(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}t.definitions.forEach((function(e){if(e.name){var n=new Set;!function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach((function(n){e(n,i)})),n.variableDefinitions&&n.variableDefinitions.forEach((function(n){e(n,i)})),n.definitions&&n.definitions.forEach((function(n){e(n,i)}))}(e,n),s[e.name.value]=n}})),e.exports=t,e.exports.DesignManagementMove=function(e,n){var i={kind:e.kind,definitions:[o(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var t=s[n]||new Set,a=new Set,r=new Set;for(t.forEach((function(e){r.add(e)}));r.size>0;){var d=r;r=new Set,d.forEach((function(e){a.has(e)||(a.add(e),(s[e]||new Set).forEach((function(e){r.add(e)})))}))}return a.forEach((function(n){var t=o(e,n);t&&i.definitions.push(t)})),i}(t,"DesignManagementMove")},azGG:function(e,n,i){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"uploadDesign"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"files"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Upload"}}}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"projectPath"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"iid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"designManagementUpload"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"projectPath"},value:{kind:"Variable",name:{kind:"Name",value:"projectPath"}}},{kind:"ObjectField",name:{kind:"Name",value:"iid"},value:{kind:"Variable",name:{kind:"Name",value:"iid"}}},{kind:"ObjectField",name:{kind:"Name",value:"files"},value:{kind:"Variable",name:{kind:"Name",value:"files"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"designs"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"DesignItem"},directives:[]},{kind:"Field",name:{kind:"Name",value:"versions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"VersionListItem"},directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"skippedDesigns"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"filename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"errors"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:489}};t.loc.source={body:'#import "../fragments/design.fragment.graphql"\n#import "../fragments/version.fragment.graphql"\n\nmutation uploadDesign($files: [Upload!]!, $projectPath: ID!, $iid: ID!) {\n  designManagementUpload(input: { projectPath: $projectPath, iid: $iid, files: $files }) {\n    designs {\n      ...DesignItem\n      versions {\n        __typename\n        nodes {\n          __typename\n          ...VersionListItem\n        }\n      }\n    }\n    skippedDesigns {\n      id\n      filename\n    }\n    errors\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function s(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!a[n]&&(a[n]=!0,!0)}))}t.definitions=t.definitions.concat(s(i("Fz6Z").definitions)),t.definitions=t.definitions.concat(s(i("Qg5k").definitions));var o={};function r(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}t.definitions.forEach((function(e){if(e.name){var n=new Set;!function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach((function(n){e(n,i)})),n.variableDefinitions&&n.variableDefinitions.forEach((function(n){e(n,i)})),n.definitions&&n.definitions.forEach((function(n){e(n,i)}))}(e,n),o[e.name.value]=n}})),e.exports=t,e.exports.uploadDesign=function(e,n){var i={kind:e.kind,definitions:[r(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var t=o[n]||new Set,a=new Set,s=new Set;for(t.forEach((function(e){s.add(e)}));s.size>0;){var d=s;s=new Set,d.forEach((function(e){a.has(e)||(a.add(e),(o[e]||new Set).forEach((function(e){s.add(e)})))}))}return a.forEach((function(n){var t=r(e,n);t&&i.definitions.push(t)})),i}(t,"uploadDesign")},c8nH:function(e,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"permissions"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"fullPath"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"iid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"project"},arguments:[{kind:"Argument",name:{kind:"Name",value:"fullPath"},value:{kind:"Variable",name:{kind:"Name",value:"fullPath"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"issue"},arguments:[{kind:"Argument",name:{kind:"Name",value:"iid"},value:{kind:"Variable",name:{kind:"Name",value:"iid"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userPermissions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createDesign"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:239}};i.loc.source={body:"query permissions($fullPath: ID!, $iid: String!) {\n  project(fullPath: $fullPath) {\n    __typename\n    id\n    issue(iid: $iid) {\n      __typename\n      id\n      userPermissions {\n        __typename\n        createDesign\n      }\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function a(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}i.definitions.forEach((function(e){if(e.name){var n=new Set;!function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach((function(n){e(n,i)})),n.variableDefinitions&&n.variableDefinitions.forEach((function(n){e(n,i)})),n.definitions&&n.definitions.forEach((function(n){e(n,i)}))}(e,n),t[e.name.value]=n}})),e.exports=i,e.exports.permissions=function(e,n){var i={kind:e.kind,definitions:[a(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var s=t[n]||new Set,o=new Set,r=new Set;for(s.forEach((function(e){r.add(e)}));r.size>0;){var d=r;r=new Set,d.forEach((function(e){o.has(e)||(o.add(e),(t[e]||new Set).forEach((function(e){r.add(e)})))}))}return o.forEach((function(n){var t=a(e,n);t&&i.definitions.push(t)})),i}(i,"permissions")},cQAt:function(e,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"createDesignTodo"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"projectPath"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"issueId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"designId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"issueIid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"filenames"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"atVersion"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createDesignTodo"},arguments:[{kind:"Argument",name:{kind:"Name",value:"projectPath"},value:{kind:"Variable",name:{kind:"Name",value:"projectPath"}}},{kind:"Argument",name:{kind:"Name",value:"issueId"},value:{kind:"Variable",name:{kind:"Name",value:"issueId"}}},{kind:"Argument",name:{kind:"Name",value:"designId"},value:{kind:"Variable",name:{kind:"Name",value:"designId"}}},{kind:"Argument",name:{kind:"Name",value:"issueIid"},value:{kind:"Variable",name:{kind:"Name",value:"issueIid"}}},{kind:"Argument",name:{kind:"Name",value:"filenames"},value:{kind:"Variable",name:{kind:"Name",value:"filenames"}}},{kind:"Argument",name:{kind:"Name",value:"atVersion"},value:{kind:"Variable",name:{kind:"Name",value:"atVersion"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"client"},arguments:[]}]}]}}],loc:{start:0,end:348}};i.loc.source={body:"mutation createDesignTodo(\n  $projectPath: String!\n  $issueId: String!\n  $designId: String!\n  $issueIid: String!\n  $filenames: [String]!\n  $atVersion: String\n) {\n  createDesignTodo(\n    projectPath: $projectPath\n    issueId: $issueId\n    designId: $designId\n    issueIid: $issueIid\n    filenames: $filenames\n    atVersion: $atVersion\n  ) @client\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function a(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}i.definitions.forEach((function(e){if(e.name){var n=new Set;!function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach((function(n){e(n,i)})),n.variableDefinitions&&n.variableDefinitions.forEach((function(n){e(n,i)})),n.definitions&&n.definitions.forEach((function(n){e(n,i)}))}(e,n),t[e.name.value]=n}})),e.exports=i,e.exports.createDesignTodo=function(e,n){var i={kind:e.kind,definitions:[a(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var s=t[n]||new Set,o=new Set,r=new Set;for(s.forEach((function(e){r.add(e)}));r.size>0;){var d=r;r=new Set,d.forEach((function(e){o.has(e)||(o.add(e),(t[e]||new Set).forEach((function(e){r.add(e)})))}))}return o.forEach((function(n){var t=a(e,n);t&&i.definitions.push(t)})),i}(i,"createDesignTodo")},dhrW:function(e,n,i){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getDesign"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"fullPath"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"iid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"atVersion"}},type:{kind:"NamedType",name:{kind:"Name",value:"DesignManagementVersionID"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"filenames"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"project"},arguments:[{kind:"Argument",name:{kind:"Name",value:"fullPath"},value:{kind:"Variable",name:{kind:"Name",value:"fullPath"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"issue"},arguments:[{kind:"Argument",name:{kind:"Name",value:"iid"},value:{kind:"Variable",name:{kind:"Name",value:"iid"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"designCollection"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"designs"},arguments:[{kind:"Argument",name:{kind:"Name",value:"atVersion"},value:{kind:"Variable",name:{kind:"Name",value:"atVersion"}}},{kind:"Argument",name:{kind:"Name",value:"filenames"},value:{kind:"Variable",name:{kind:"Name",value:"filenames"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"DesignItem"},directives:[]},{kind:"Field",name:{kind:"Name",value:"issue"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"webPath"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"webUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"participants"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Author"},directives:[]}]}}]}}]}}]}}]}}]}}]}}]}}]}}],loc:{start:0,end:703}};t.loc.source={body:'#import "../fragments/design.fragment.graphql"\n#import "~/graphql_shared/fragments/author.fragment.graphql"\n\nquery getDesign(\n  $fullPath: ID!\n  $iid: String!\n  $atVersion: DesignManagementVersionID\n  $filenames: [String!]\n) {\n  project(fullPath: $fullPath) {\n    id\n    issue(iid: $iid) {\n      id\n      designCollection {\n        designs(atVersion: $atVersion, filenames: $filenames) {\n          nodes {\n            ...DesignItem\n            issue {\n              id\n              title\n              webPath\n              webUrl\n              participants {\n                nodes {\n                  ...Author\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function s(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!a[n]&&(a[n]=!0,!0)}))}t.definitions=t.definitions.concat(s(i("Fz6Z").definitions)),t.definitions=t.definitions.concat(s(i("TgHV").definitions));var o={};function r(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}t.definitions.forEach((function(e){if(e.name){var n=new Set;!function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach((function(n){e(n,i)})),n.variableDefinitions&&n.variableDefinitions.forEach((function(n){e(n,i)})),n.definitions&&n.definitions.forEach((function(n){e(n,i)}))}(e,n),o[e.name.value]=n}})),e.exports=t,e.exports.getDesign=function(e,n){var i={kind:e.kind,definitions:[r(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var t=o[n]||new Set,a=new Set,s=new Set;for(t.forEach((function(e){s.add(e)}));s.size>0;){var d=s;s=new Set,d.forEach((function(e){a.has(e)||(a.add(e),(o[e]||new Set).forEach((function(e){s.add(e)})))}))}return a.forEach((function(n){var t=r(e,n);t&&i.definitions.push(t)})),i}(t,"getDesign")},iAc6:function(e,n,i){"use strict";var t=i("H8gz"),a=i("u1ru"),s=i("nPFI"),o=i("t9l/");const r="image/*",d=/image\/.+/;var l={components:{GlIcon:t.a,GlLink:a.a,GlSprintf:s.a},props:{displayAsCard:{type:Boolean,required:!1,default:!1},enableDragBehavior:{type:Boolean,required:!1,default:!1},dropToStartMessage:{type:String,required:!1,default:Object(o.a)("Drop your files to start your upload.")},isFileValid:{type:Function,required:!1,default:function(e){let{type:n}=e;return(n.match(d)||[]).length>0}},validFileMimetypes:{type:Array,required:!1,default:function(){return[r]}},singleFileSelection:{type:Boolean,required:!1,default:!1},inputFieldName:{type:String,required:!1,default:"upload_file"},shouldUpdateInputOnFileDrop:{type:Boolean,required:!1,default:!1}},data:()=>({dragCounter:0,isDragDataValid:!0}),computed:{dragging(){return 0!==this.dragCounter},iconStyles(){return{size:this.displayAsCard?24:16,class:this.displayAsCard?"gl-mb-2":"gl-mr-3 gl-text-gray-500"}},validMimeTypeString(){return this.validFileMimetypes.join()}},methods:{isValidUpload(e){return e.every(this.isFileValid)},isValidDragDataType(e){let{dataTransfer:n}=e;return Boolean(n&&n.types.some((function(e){return"Files"===e})))},ondrop(e){let{dataTransfer:n={}}=e;if(this.dragCounter=0,!this.isDragDataValid)return;const{files:i}=n;if(this.isValidUpload(Array.from(i))){if(this.shouldUpdateInputOnFileDrop){if(this.singleFileSelection&&i.length>1)return void this.$emit("error");this.$refs.fileUpload.files=i}this.$emit("change",this.singleFileSelection?i[0]:i)}else this.$emit("error")},ondragenter(e){this.dragCounter+=1,this.isDragDataValid=this.isValidDragDataType(e)},ondragleave(){this.dragCounter-=1},openFileUpload(){this.$refs.fileUpload.click()},onFileInputChange(e){this.$emit("change",this.singleFileSelection?e.target.files[0]:e.target.files)}}},u=i("bPvS"),c=Object(u.a)(l,(function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("div",{staticClass:"gl-w-full gl-relative",on:{dragstart:function(e){e.preventDefault(),e.stopPropagation()},dragend:function(e){e.preventDefault(),e.stopPropagation()},dragover:function(e){e.preventDefault(),e.stopPropagation()},dragenter:function(n){return n.preventDefault(),n.stopPropagation(),e.ondragenter(n)},dragleave:function(n){return n.preventDefault(),n.stopPropagation(),e.ondragleave(n)},drop:function(n){return n.preventDefault(),n.stopPropagation(),e.ondrop(n)}}},[e._t("default",[i("button",{staticClass:"card upload-dropzone-card upload-dropzone-border gl-w-full gl-h-full gl-align-items-center gl-justify-content-center gl-p-4",attrs:{type:"button"},on:{click:e.openFileUpload}},[i("div",{staticClass:"gl-display-flex gl-align-items-center gl-justify-content-center gl-text-center",class:{"gl-flex-direction-column":e.displayAsCard},attrs:{"data-testid":"dropzone-area"}},[i("gl-icon",{class:e.iconStyles.class,attrs:{name:"upload",size:e.iconStyles.size}}),e._v(" "),i("p",{staticClass:"gl-mb-0",attrs:{"data-testid":"upload-text"}},[e._t("upload-text",[i("gl-sprintf",{attrs:{message:e.singleFileSelection?e.__("Drop or %{linkStart}upload%{linkEnd} file to attach"):e.__("Drop or %{linkStart}upload%{linkEnd} files to attach")},scopedSlots:e._u([{key:"link",fn:function(n){var t=n.content;return[i("gl-link",{on:{click:function(n){return n.stopPropagation(),e.openFileUpload(n)}}},[e._v("\n                  "+e._s(t)+"\n                ")])]}}])})],{openFileUpload:e.openFileUpload})],2)],1)]),e._v(" "),i("input",{ref:"fileUpload",staticClass:"hide",attrs:{type:"file",name:e.inputFieldName,accept:e.validFileMimetypes,multiple:!e.singleFileSelection},on:{change:e.onFileInputChange}})]),e._v(" "),i("transition",{attrs:{name:"upload-dropzone-fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.dragging&&!e.enableDragBehavior,expression:"dragging && !enableDragBehavior"}],staticClass:"card upload-dropzone-border upload-dropzone-overlay gl-w-full gl-h-full gl-absolute gl-display-flex gl-align-items-center gl-justify-content-center gl-p-4"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.isDragDataValid,expression:"!isDragDataValid"}],staticClass:"mw-50 gl-text-center"},[e._t("invalid-drag-data-slot",[i("h3",{class:{"gl-font-base gl-display-inline":!e.displayAsCard}},[e._v("\n            "+e._s(e.__("Oh no!"))+"\n          ")]),e._v(" "),i("span",[e._v(e._s(e.__("You are trying to upload something other than an image. Please upload a .png, .jpg, .jpeg, .gif, .bmp, .tiff or .ico.")))])])],2),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isDragDataValid,expression:"isDragDataValid"}],staticClass:"mw-50 gl-text-center"},[e._t("valid-drag-data-slot",[i("h3",{class:{"gl-font-base gl-display-inline":!e.displayAsCard}},[e._v("\n            "+e._s(e.__("Incoming!"))+"\n          ")]),e._v(" "),i("span",[e._v(e._s(e.dropToStartMessage))])])],2)])])],2)}),[],!1,null,null,null);n.a=c.exports},qhCH:function(e,n,i){var t={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"DesignNote"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Note"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Author"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHtml"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resolved"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"position"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"diffRefs"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"DesignDiffRefs"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"x"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"y"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"height"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"width"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"userPermissions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"DesignNotePermissions"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"discussion"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"notes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:479}};t.loc.source={body:'#import "./diff_refs.fragment.graphql"\n#import "~/graphql_shared/fragments/author.fragment.graphql"\n#import "./note_permissions.fragment.graphql"\n\nfragment DesignNote on Note {\n  id\n  author {\n    ...Author\n  }\n  body\n  bodyHtml\n  createdAt\n  resolved\n  position {\n    diffRefs {\n      ...DesignDiffRefs\n    }\n    x\n    y\n    height\n    width\n  }\n  userPermissions {\n    ...DesignNotePermissions\n  }\n  discussion {\n    id\n    notes {\n      nodes {\n        id\n      }\n    }\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function s(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!a[n]&&(a[n]=!0,!0)}))}t.definitions=t.definitions.concat(s(i("svfI").definitions)),t.definitions=t.definitions.concat(s(i("TgHV").definitions)),t.definitions=t.definitions.concat(s(i("HSIc").definitions));var o={};function r(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}t.definitions.forEach((function(e){if(e.name){var n=new Set;!function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach((function(n){e(n,i)})),n.variableDefinitions&&n.variableDefinitions.forEach((function(n){e(n,i)})),n.definitions&&n.definitions.forEach((function(n){e(n,i)}))}(e,n),o[e.name.value]=n}})),e.exports=t,e.exports.DesignNote=function(e,n){var i={kind:e.kind,definitions:[r(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var t=o[n]||new Set,a=new Set,s=new Set;for(t.forEach((function(e){s.add(e)}));s.size>0;){var d=s;s=new Set,d.forEach((function(e){a.has(e)||(a.add(e),(o[e]||new Set).forEach((function(e){s.add(e)})))}))}return a.forEach((function(n){var t=r(e,n);t&&i.definitions.push(t)})),i}(t,"DesignNote")},r8SC:function(e,n,i){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"repositionImageDiffNote"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"RepositionImageDiffNoteInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repositionImageDiffNote"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"errors"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"note"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"DesignNote"},directives:[]}]}}]}}]}}],loc:{start:0,end:224}};t.loc.source={body:'#import "../fragments/design_note.fragment.graphql"\n\nmutation repositionImageDiffNote($input: RepositionImageDiffNoteInput!) {\n  repositionImageDiffNote(input: $input) {\n    errors\n    note {\n      ...DesignNote\n    }\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};t.definitions=t.definitions.concat(i("qhCH").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!a[n]&&(a[n]=!0,!0)})));var s={};function o(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}t.definitions.forEach((function(e){if(e.name){var n=new Set;!function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach((function(n){e(n,i)})),n.variableDefinitions&&n.variableDefinitions.forEach((function(n){e(n,i)})),n.definitions&&n.definitions.forEach((function(n){e(n,i)}))}(e,n),s[e.name.value]=n}})),e.exports=t,e.exports.repositionImageDiffNote=function(e,n){var i={kind:e.kind,definitions:[o(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var t=s[n]||new Set,a=new Set,r=new Set;for(t.forEach((function(e){r.add(e)}));r.size>0;){var d=r;r=new Set,d.forEach((function(e){a.has(e)||(a.add(e),(s[e]||new Set).forEach((function(e){r.add(e)})))}))}return a.forEach((function(n){var t=o(e,n);t&&i.definitions.push(t)})),i}(t,"repositionImageDiffNote")},rCa0:function(e,n){var i={kind:"Document",definitions:[{kind:"ObjectTypeDefinition",name:{kind:"Name",value:"ActiveDiscussion"},interfaces:[],directives:[],fields:[{kind:"FieldDefinition",name:{kind:"Name",value:"id"},arguments:[],type:{kind:"NamedType",name:{kind:"Name",value:"ID"}},directives:[]},{kind:"FieldDefinition",name:{kind:"Name",value:"source"},arguments:[],type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}]},{kind:"ObjectTypeExtension",name:{kind:"Name",value:"Query"},interfaces:[],directives:[],fields:[{kind:"FieldDefinition",name:{kind:"Name",value:"activeDiscussion"},arguments:[],type:{kind:"NamedType",name:{kind:"Name",value:"ActiveDiscussion"}},directives:[]}]},{kind:"ObjectTypeExtension",name:{kind:"Name",value:"Mutation"},interfaces:[],directives:[],fields:[{kind:"FieldDefinition",name:{kind:"Name",value:"updateActiveDiscussion"},arguments:[{kind:"InputValueDefinition",name:{kind:"Name",value:"id"},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"source"},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},directives:[]}]}],loc:{start:0,end:198}};i.loc.source={body:"type ActiveDiscussion {\n  id: ID\n  source: String\n}\n\nextend type Query {\n  activeDiscussion: ActiveDiscussion\n}\n\nextend type Mutation {\n  updateActiveDiscussion(id: ID!, source: String!): Boolean\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=i},svfI:function(e,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"DesignDiffRefs"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"DiffRefs"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"baseSha"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"startSha"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"headSha"},arguments:[],directives:[]}]}}],loc:{start:0,end:71}};i.loc.source={body:"fragment DesignDiffRefs on DiffRefs {\n  baseSha\n  startSha\n  headSha\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function a(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}i.definitions.forEach((function(e){if(e.name){var n=new Set;!function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach((function(n){e(n,i)})),n.variableDefinitions&&n.variableDefinitions.forEach((function(n){e(n,i)})),n.definitions&&n.definitions.forEach((function(n){e(n,i)}))}(e,n),t[e.name.value]=n}})),e.exports=i,e.exports.DesignDiffRefs=function(e,n){var i={kind:e.kind,definitions:[a(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var s=t[n]||new Set,o=new Set,r=new Set;for(s.forEach((function(e){r.add(e)}));r.size>0;){var d=r;r=new Set,d.forEach((function(e){o.has(e)||(o.add(e),(t[e]||new Set).forEach((function(e){r.add(e)})))}))}return o.forEach((function(n){var t=a(e,n);t&&i.definitions.push(t)})),i}(i,"DesignDiffRefs")},"w+qJ":function(e,n,i){"use strict";i.d(n,"a",(function(){return t}));const t=function(){let{mark:e,measures:n=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};window.requestAnimationFrame((function(){e&&!performance.getEntriesByName(e).length&&performance.mark(e),n.forEach((function(e){performance.measure(e.name,e.start,e.end)}))}))}}}]);
//# sourceMappingURL=design_management.99d4c1b6.chunk.js.map